<!DOCTYPE HTML>
<html lang="zh-cn" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <!-- 2023-08-02 09:16:28 tzj -->
        <meta charset="UTF-8">
        <title>网易游戏组件库文档</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="2023-07-28 11:09:13 tzj 过一遍组件库">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/css/nav2.css">
        <link rel="stylesheet" href="theme/css/common.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">首页</a></li><li class="chapter-item expanded affix "><a href="note.html">项目注意事项</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">PC内部组件库</li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.</strong> 基础类</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="001.html"><strong aria-hidden="true">1.1.</strong> jQuery库</a></li><li class="chapter-item expanded "><a href="002.html"><strong aria-hidden="true">1.2.</strong> 分享组件shareV5</a></li><li class="chapter-item expanded "><a href="003.html"><strong aria-hidden="true">1.3.</strong> 图片查看器lightbox2</a></li><li class="chapter-item expanded "><a href="004.html"><strong aria-hidden="true">1.4.</strong> 官网订阅组件</a></li><li class="chapter-item expanded "><a href="005.html"><strong aria-hidden="true">1.5.</strong> 图册组件imageshow</a></li><li class="chapter-item expanded "><a href="006.html"><strong aria-hidden="true">1.6.</strong> 复制文本copytext</a></li><li class="chapter-item expanded "><a href="007.html"><strong aria-hidden="true">1.7.</strong> 弹层</a></li><li class="chapter-item expanded "><a href="008.html"><strong aria-hidden="true">1.8.</strong> 视频组件videoV2</a></li><li class="chapter-item expanded "><a href="009.html"><strong aria-hidden="true">1.9.</strong> 音频组件audio</a></li><li class="chapter-item expanded "><a href="010.html"><strong aria-hidden="true">1.10.</strong> 服务器时间组件bjTime</a></li><li class="chapter-item expanded "><a href="011.html"><strong aria-hidden="true">1.11.</strong> 插入flash</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.12.</strong> 翻页组件pager</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.13.</strong> 共用alert组件PopDialog</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.14.</strong> 表单验证组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.15.</strong> 序列组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.16.</strong> 3D相册轮播组件[旧版]</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.17.</strong> 3D相册轮播组件[V2版]</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.18.</strong> 二维码组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.19.</strong> 手游官网下载组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.20.</strong> 弹幕组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.21.</strong> 搜索模块</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.22.</strong> 滚动模块</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.23.</strong> 职业模块[废弃]</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.24.</strong> 文章内页</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.25.</strong> 营销点代码</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.26.</strong> 点击统计代码/监测代码</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.27.</strong> 内容工具组件</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> 高级类</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> 快速注册</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.2.</strong> 登录组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.3.</strong> 投票系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.4.</strong> 评论系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.5.</strong> 抽奖效果组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.6.</strong> 图片延迟加载</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.7.</strong> 倒计时</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.8.</strong> 领取礼包码</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.9.</strong> 新站点申请章鱼[加白名单]</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.10.</strong> 预约接口手游</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.11.</strong> 手游os预约版下载地址</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.12.</strong> 新游预约组件旧版</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> 系统类</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.1.</strong> PM系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> PM系统-源文件及配置</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> 新闻发布系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.4.</strong> 新闻发布系统-索引页面配置发布</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.5.</strong> 新闻发布系统-More页面配置发布</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.6.</strong> 新闻发布系统-消息内容页面配置发布</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.7.</strong> 投票系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.8.</strong> 百科系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.9.</strong> 图库系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.10.</strong> 评论系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.11.</strong> 点赞系统</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.12.</strong> 视频专区</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> 其他类</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.1.</strong> 微博话题墙</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">移动内部组件</li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> 基础类</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">5.1.</strong> 分享组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.2.</strong> 分享组件2</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> 加载组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> 摇一摇组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> 键启动组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.6.</strong> 分享监控组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.7.</strong> 视频H5组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.8.</strong> 手游渠道下载指引弹层</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">双端通用组件</li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> 基础类</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> 图片上传组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> 图片裁剪组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> 3D地图组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> 图文Metro流组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.5.</strong> 新版新游预约组件</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.6.</strong> 网页加载与错误监控统计</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.7.</strong> 反馈组件</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">外部组件列表</li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> 外部组件列表</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">7.1.</strong> 汇总</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">FIS插件列表</li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> 编译插件</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> parser-html-ejs</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> postprocessor-include</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> postprocessor-replace</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.4.</strong> preprocessor-resload</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.</strong> 打包插件</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">9.1.</strong> deploy-local-supply</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.2.</strong> postpackager-html-encode</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.3.</strong> postpackager-supply</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.4.</strong> postpackager-tolist</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.5.</strong> postpackager-trueload</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.6.</strong> postpackager-usemin</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">9.7.</strong> postpackager-jpg-towebp</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">webpack插件列表</li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.</strong> loader</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">10.1.</strong> resload</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.2.</strong> html-supply</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">10.3.</strong> html-include</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">DIY自制</li><li class="chapter-item expanded "><div><strong aria-hidden="true">11.</strong> css样式</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="991.html"><strong aria-hidden="true">11.1.</strong> 栅格布局grid</a></li><li class="chapter-item expanded "><a href="992.html"><strong aria-hidden="true">11.2.</strong> 浏览器适配</a></li><li class="chapter-item expanded "><a href="993.html"><strong aria-hidden="true">11.3.</strong> 滚动条</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">12.</strong> js封装</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="899.html"><strong aria-hidden="true">12.1.</strong> 不规则div点击事件</a></li><li class="chapter-item expanded "><a href="996.html"><strong aria-hidden="true">12.2.</strong> 屏幕适配rem</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">13.</strong> html结构</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="892.html"><strong aria-hidden="true">13.1.</strong> 局部刷新</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.</strong> plugin第三方插件</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="997.html"><strong aria-hidden="true">14.1.</strong> 画布工具html2canvas</a></li><li class="chapter-item expanded "><a href="995.html"><strong aria-hidden="true">14.2.</strong> 文字生成二维码QRCode</a></li><li class="chapter-item expanded "><a href="994.html"><strong aria-hidden="true">14.3.</strong> 字体包压缩fontmin</a></li><li class="chapter-item expanded "><a href="897.html"><strong aria-hidden="true">14.4.</strong> node</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">15.</strong> utils工具使用</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="896.html"><strong aria-hidden="true">15.1.</strong> feg</a></li><li class="chapter-item expanded "><a href="891.html"><strong aria-hidden="true">15.2.</strong> rime小狼毫</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.</strong> 网络相关network</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="898.html"><strong aria-hidden="true">16.1.</strong> 文件上传file upload</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">17.</strong> other其他未分类</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="890.html"><strong aria-hidden="true">17.1.</strong> 图片生成字体</a></li><li class="chapter-item expanded "><a href="893.html"><strong aria-hidden="true">17.2.</strong> 随笔</a></li><li class="chapter-item expanded "><a href="990.html"><strong aria-hidden="true">17.3.</strong> 兼容性处理</a></li><li class="chapter-item expanded "><a href="999.html"><strong aria-hidden="true">17.4.</strong> diy</a></li><li class="chapter-item expanded "><a href="998.html"><strong aria-hidden="true">17.5.</strong> mdbook</a></li><li class="chapter-item expanded "><a href="blog.html"><strong aria-hidden="true">17.6.</strong> blog</a></li><li class="chapter-item expanded "><a href="895.html"><strong aria-hidden="true">17.7.</strong> 文档记录</a></li><li class="chapter-item expanded "><a href="894.html"><strong aria-hidden="true">17.8.</strong> 浏览器尺寸</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><a href="998.html">说明</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="侧边栏显/隐" aria-label="侧边栏显/隐" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="修改主题" aria-label="修改主题" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="搜索(快捷键：Ctrl+F)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">网易游戏组件库文档</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="打印该文档" aria-label="打印该文档">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="全局搜索：Ctrl+F" aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="首页"><a class="header" href="#首页">首页</a></h1>
<blockquote>
<p>该文档是对<a href="http://webpack.nie.netease.com/index.html">网易游戏部组件库</a>的组件尝试使用，对各个组件及其配置熟悉下。</p>
</blockquote>
<blockquote>
<p>本文档为本人私人笔记，不具权威性，仅供参考，且更新时间不定。2023-08-10 14:24:49 tzj</p>
</blockquote>
<h1 id="导入"><a class="header" href="#导入">导入</a></h1>
<pre><code class="language-html">&lt;!--国内内部组件--&gt;
&lt;!--PC--&gt;
&lt;script src=&quot;https://nie.res.netease.com/comm/js/jquery(mixNIE).1.11.js&quot;&gt;&lt;/script&gt;
&lt;!--移动--&gt;
&lt;script src=&quot;https://nie.res.netease.com/comm/js/zepto(mixNIE).last.js&quot;&gt;&lt;/script&gt;

&lt;!--海外内部组件--&gt;
&lt;!--PC--&gt;
&lt;script src=&quot;https://comm.res.easebar.com/js/jquery(mixNIE).1.11.js&quot;&gt;&lt;/script&gt;
&lt;!--移动--&gt;
&lt;script src=&quot;https://comm.res.easebar.com/js/zepto(mixNIE).last.js&quot;&gt;&lt;/script&gt;

&lt;!--代理合作--&gt;
&lt;!--PC--&gt;
&lt;script src=&quot;https://comm.res.easebar.com/js/tw/jquery(mixNIE).1.11.js&quot;&gt;&lt;/script&gt;
&lt;!--移动--&gt;
&lt;script src=&quot;https://comm.res.easebar.com/js/tw/zepto(mixNIE).last.js&quot;&gt;&lt;/script&gt;
&lt;!--内部组件代理合作版不支持该组件库--&gt;
</code></pre>
<blockquote>
<p><strong>规范</strong> 外部组件若域名是<code>nie.res.netease.com</code>则可以用外链，否则需下载到本地<code>src/js/lib/插件.js</code>。
海外和代理合作，将域名替换为<code>comm.res.easebar.com</code>。</p>
</blockquote>
<h1 id="初始化"><a class="header" href="#初始化">初始化</a></h1>
<blockquote>
<p><strong>注意</strong> 所有内部组件<code>nie.require(&quot;nie.util.模块名&quot;)</code>必须写在<code>nie.define</code>的回调里，否则报错。</p>
</blockquote>
<pre><code class="language-js">// copyright 设置white，写在外面
// nie.config.copyRight.setWhite();
// 模块，一般一个就够了，Index为暴露全局的变量名
nie.define(&quot;Index&quot;, function () {
    //创建（分享）组件实例
    const shareV5 = nie.require(&quot;nie.util.shareV5&quot;);
    // 引入外部js，也可以是其他文件如.txt、.md，内容会直接插入
    __inline('json.js');

    const index = {
        init: function () {
            this.bind();
            this.share();
        },
        bind: function () {
            // 可以视为加载完成的回调
        },
        // 给模块定义方法
        share: function () {
            let shareTitle = $(&quot;#share_title&quot;).html();
            let shareTxt = $(&quot;#share_desc&quot;).html();
            let sharePic = $(&quot;#share_pic&quot;).attr(&quot;data-src&quot;);
            let share = shareV5({
                fat: &quot;#NIE-share&quot;,
                type: 1,
                defShow: [23, 2, 1, 24],
                title: shareTitle,
                content: shareTxt,
                img: sharePic
            });
        }
    }

    index.init();
    // 暴露给全局
    return index
});
</code></pre>
<p><a href="https://note.youdao.com/ynoteshare/index.html?id=6d1b1b5e350a6faabb680d814418292b&amp;type=note&amp;_time=1689903109543">授权接口</a></p>
<h1 id="待处理"><a class="header" href="#待处理">待处理</a></h1>
<ul>
<li><input disabled="" type="checkbox"/>
pre复制</li>
<li><input disabled="" type="checkbox"/>
路径加参数，自动跳转到指定页</li>
<li><input disabled="" type="checkbox"/>
弹出html，可编辑内容</li>
</ul>
<pre><code class="language-js">window.location.protocol+&quot;//&quot;+window.location.host; //   返回https://mp.csdn.net

window.location.host; //返回url 的主机部分，例如：mp.csdn.net  
window.location.hostname; //返回mp.csdn.net
window.location.href; //返回整个url字符串(在浏览器中就是完整的地址栏)
window.location.pathname; //返回/a/index.php或者/index.php  
window.location.protocol; //返回url 的协议部分，例如： http:，ftp:，maito:等等。  
window.location.port //url 的端口部分，如果采用默认的80端口，那么返回值并不是默认的80而是空字符  
 
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="项目注意事项"><a class="header" href="#项目注意事项">项目注意事项</a></h1>
<blockquote>
<p>网易游戏前端项目注意事项记录，欢迎补充</p>
</blockquote>
<ul>
<li><code>nie</code>的组件初始化定义都在<code>nie.define()</code>里，否则可能报错。</li>
<li>文件名不能大写</li>
<li>js使用img路径时，用<code>_uri()</code>，否则上线后混淆处理后，找不到文件</li>
<li>所有跳转官网的链接后缀一定要带<code>/index.html</code>，如<code>https://game.163.com/index.html</code> 而不是 <code>https://game.163.com/</code> 前者是官网地址，后者默认映射到前者，但有时候会改配置</li>
<li>该框架下，解构报错、class设置属性初始值时报错</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jquery库"><a class="header" href="#jquery库">jQuery库</a></h1>
<h2 id="版本"><a class="header" href="#版本">版本</a></h2>
<div class="table-wrapper"><table><thead><tr><th>版本</th><th>引用地址</th><th>备注</th></tr></thead><tbody>
<tr><td>JQuery1.6.4</td><td>http://res.nie.netease.com/comm/js/jquery(mixNIE).last.js</td><td>很多旧站点使用的版本，有很多JQuery插件不支持，不推荐使用</td></tr>
<tr><td>JQuery1.11</td><td>http://res.nie.netease.com/comm/js/jquery(mixNIE).1.11.js</td><td>比较新的版本，支持几乎目前所有JQuery插件，新产品都使用这个</td></tr>
<tr><td>Zepto1.1.4</td><td>http://res.nie.netease.com/comm/js/zepto(mixNIE).last.js</td><td>移动端使用Zepto，没有包含animation模块，最基础的模块</td></tr>
</tbody></table>
</div>
<h2 id="额外的共用方法"><a class="header" href="#额外的共用方法">额外的共用方法</a></h2>
<h3 id="nieutilajax"><a class="header" href="#nieutilajax">nie.util.ajax</a></h3>
<blockquote>
<p>插入样式</p>
</blockquote>
<pre><code class="language-js editable">nie.util.addStyle('body{background-color:red}');
</code></pre>
<h3 id="cookie"><a class="header" href="#cookie">$.cookie</a></h3>
<blockquote>
<p>操作cookie</p>
</blockquote>
<pre><code class="language-js">//获取cookie
var val = $.cookie(&quot;the_cookie&quot;);

//设置cookie名为the_cookie，值为`the_value`，浏览器关闭则失效
$.cookie('the_cookie', 'the_value');    

//设置cookie，过期7天，访问路径为/，域名为163.com的根域名
$.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: '163.com', secure: true }); 

//删除cookie
$.cookie('the_cookie', null);
</code></pre>
<h3 id="browser"><a class="header" href="#browser">$.browser</a></h3>
<blockquote>
<p>判断浏览器类型和版本</p>
</blockquote>
<pre><code class="language-js">console.log($.browser);
console.log(&quot;浏览器内核为：&quot;+$.browser.browser);

//判断是否IE
console.log($.browser.msie);

//判断是否webkit
console.log($.browser.webkit);

//获取版本号
console.log($.browser.version);
</code></pre>
<h3 id="include"><a class="header" href="#include">$.include</a></h3>
<blockquote>
<p>预加载文件，只能js、css,<strong>以src为根目录</strong></p>
</blockquote>
<pre><code class="language-js">//需要添加文件加载编码类型，在url中带上&quot;?charset=gb2312&quot;

//加载单个文件
$.include('js/app/data.js?charset=gb2312');

//加载单个文件并回调
$.include('js/app/data.js',()=&gt;{
    console.log(&quot;回调11&quot;);
});

//加载多个文件并回调同一个函数
$.include( ['css/inline.css','js/app/data.js'] ,()=&gt;{
    console.log(&quot;回调222&quot;);
});
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="分享组件sharev5说明"><a class="header" href="#分享组件sharev5说明">分享组件shareV5说明</a></h1>
<blockquote>
<p><a href="http://res.nie.netease.com/comm/js/nie/util/share/shareV5.html">参考地址</a></p>
<p>模块：<code>nie.util.shareV5</code></p>
<p>说明：只有域名为<code>*.163.com</code>才能分享，可在hosts文件添加配置，有的东西如分享图片share.jpg、分享文案，只有正式环境有效。测试地址和本地都不行。</p>
</blockquote>
<h2 id="调用示例"><a class="header" href="#调用示例">调用示例</a></h2>
<blockquote>
<p><strong>注意：</strong><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/share.html">官网</a> 这里<code>defShow</code>写错了，最后一个应该是24
**注意：**官网说可以将<code>shareV5</code>定义在外，实际会报错。非要外部调用，可以定义为模块属性，将整个模块暴露出去。
**注意：**参数无内容的时候 不必填写，请勿留空，填写&quot;&quot;的时候会引发错误 ，如：url:&quot;&quot;</p>
</blockquote>
<pre><code class="language-js">var shareV5 = nie.require(&quot;nie.util.shareV5&quot;);

var share = shareV5({
        fat:&quot;#NIE-share&quot;,//分享组件插入父级（dom或选择器），默认：&quot;#NIE-share&quot;
        type:1,//分享组件类别，默认:1（1：小icon，2：大icon，3：右侧滚动条分享，4：图片分享，5：文本分享，6：带文字的小icon）
        defShow:[23,22,2,1,24],//默认展示的分享按钮 
        title:null,//分享的标题,默认：当前页面的title
        url:null,//分享的链接，默认：当前页面的url
        img:null,//分享的图片，默认：null
        content:null,//分享的正文内容，只有部分平台支持。默认：当前页面的title
        product:&quot;产品号&quot; //选填，自适应163.com域名的产品，论坛需要指定（论坛指定规范：天下贰论坛 product=&quot;tx2_bbs&quot;）
    });


//修改分享的内容，字段与上面的对齐
share.modify({
    title : '标题',
    img : 'http://www.163.com/icon.png'
});
</code></pre>
<h2 id="分享文案"><a class="header" href="#分享文案">分享文案</a></h2>
<blockquote>
<p>该内容放在<code>src/inline/shareContent.html</code>中，文案内容由具体项目的编辑提供，结构如下</p>
</blockquote>
<pre><code class="language-html">&lt;div id=&quot;share_content&quot; style=&quot;display:none&quot;&gt;
    &lt;div id=&quot;share_title&quot; pub-name=&quot;分享文案&quot; &gt;&lt;/div&gt;
    &lt;div id=&quot;share_url&quot; pub-name=&quot;分享地址&quot; &gt;&lt;/div&gt;
    &lt;div id=&quot;share_desc&quot; pub-name=&quot;分享文本&quot; &gt;&lt;/div&gt;
   &lt;img id=&quot;share_pic&quot; data-src=&quot;#&quot; pub-name=&quot;分享图片&quot; /&gt;
&lt;/div&gt;
</code></pre>
<blockquote>
<p>并在index.html中预加载。</p>
</blockquote>
<pre><code class="language-html">&lt;link rel=&quot;import&quot; href=&quot;inline/shareContent.html?__inline&quot;/&gt;
</code></pre>
<blockquote>
<p>以上配置完成后，可以这样写：</p>
</blockquote>
<pre><code class="language-js">nie.define(&quot;Index&quot;, function () {
    const shareV5 = nie.require(&quot;nie.util.shareV5&quot;);
    const index = {
        init: function () {
            this.bind();
            this.share();
        },
        bind: function () {
        },
        // 给模块定义方法
        share: function () {
            let shareTitle = $(&quot;#share_title&quot;).html();
            let shareTxt = $(&quot;#share_desc&quot;).html();
            let sharePic = $(&quot;#share_pic&quot;).attr(&quot;data-src&quot;);
            let share = shareV5({
                fat: &quot;#NIE-share&quot;,
                type: 1,
                defShow: [23, 2, 1, 24],
                title: shareTitle,
                content: shareTxt,
                img: sharePic
            });
        }
    }
    index.init();
});
</code></pre>
<h2 id="按钮参数"><a class="header" href="#按钮参数">按钮参数</a></h2>
<div class="table-wrapper"><table><thead><tr><th>按钮</th><th>参数</th></tr></thead><tbody>
<tr><td>微信</td><td>23</td></tr>
<tr><td>易信</td><td>22</td></tr>
<tr><td>新浪微博</td><td>2</td></tr>
<tr><td>QQ空间</td><td>1</td></tr>
<tr><td>腾讯微博</td><td>3</td></tr>
<tr><td>人人网</td><td>8</td></tr>
<tr><td>QQ好友</td><td>24</td></tr>
<tr><td>豆瓣</td><td>11</td></tr>
<tr><td>百度贴吧</td><td>14</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="图片查看器lightbox2"><a class="header" href="#图片查看器lightbox2">图片查看器lightbox2</a></h1>
<ul>
<li><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/lightbox.html">网易lightbox旧版文档</a></li>
<li><a href="http://webpack.nie.netease.com/index.html#pack=pc_outline/switch/lightbox2.html">网易lightbox2文档</a></li>
<li><a href="https://lokeshdhakar.com/projects/lightbox2/">lightbox官网</a> </li>
<li><a href="http://test.nie.163.com/test_html/nie-js/lightbox2/index.html">预览</a></li>
<li><a href="https://git-wz.nie.netease.com/nie-js/nie-lightbox2">源码</a></li>
</ul>
<h2 id="使用"><a class="header" href="#使用">使用</a></h2>
<p>1.引入：</p>
<pre><code class="language-html">&lt;script type=&quot;text/javascript&quot; src=&quot;https://nie.res.netease.com/comm/js/jquery(mixNIE).1.11.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;https://nie.res.netease.com/comm/js/nie/ref/lightbox2.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>2.html结构：</p>
<blockquote>
<p>把需要查看大图的<code>img</code>用<code>a</code>标签包着，增加<code>data-lightbox</code>属性。其中<code>href</code>属性值是大图的地址，<code>data-title</code>属性值是大图的标题，</p>
</blockquote>
<pre><code class="language-html">&lt;!-- 一张图片 --&gt;
&lt;a href=&quot;http://dummyimage.com/100x100/ddd/79c&quot; data-lightbox=&quot;image-1&quot; data-title=&quot;My caption&quot;&gt;
    &lt;img src=&quot;http://dummyimage.com/90x90/ddd/79c&quot; alt=&quot;&quot;&gt;
&lt;/a&gt;

&lt;!-- 一组图片（data-lightbox的值是相同的） --&gt;
&lt;a href=&quot;http://dummyimage.com/1990x90/ddd/79c&quot; data-lightbox=&quot;image-2&quot; data-title=&quot;My caption&quot;&gt;
    &lt;img src=&quot;http://dummyimage.com/90x90/ddd/79c&quot; alt=&quot;&quot;&gt;
&lt;/a&gt;
&lt;a href=&quot;http://dummyimage.com/990x990/ddd/79c&quot; data-lightbox=&quot;image-2&quot; data-title=&quot;My caption&quot;&gt;
    &lt;img src=&quot;http://dummyimage.com/90x90/ddd/79c&quot; alt=&quot;&quot;&gt;
&lt;/a&gt;
&lt;a href=&quot;http://dummyimage.com/90x1990/ddd/79c&quot; data-lightbox=&quot;image-2&quot; data-title=&quot;My caption&quot;&gt;
    &lt;img src=&quot;http://dummyimage.com/90x90/ddd/79c&quot; alt=&quot;&quot;&gt;
&lt;/a&gt;
</code></pre>
<p>3.js设置参数：</p>
<pre><code class="language-js">lightbox.option({
    // 显示箭头未生效
    alwaysShowNavOnTouchDevices:    false,          //查看大图时左右切换箭头是否一直显示，默认是鼠标经过才显示
    albumLabel:                     &quot;图片 %1 共 %2&quot;, //查看大图时显示在标题下的图片数量信息。默认显示当前的图像数和在集合中的图像的总数。
    disableScrolling:               false,          //查看大图时，页面是否禁止滚动
    fadeDuration:                   300,            //显示大图淡入淡出的时间，单位是毫秒
    fitImagesInViewport:            true,           //大图的高度是否自适应浏览器的视窗大小
    maxWidth:                       &quot;&quot;,             //查看大图显示的最大宽度，单位是px
    maxHeight:                      &quot;&quot;,             //查看大图显示的最大高度,单位是px
    positionFromTop:                50,             //大图距离视窗顶部的距离，单位是px
    resizeDuration:                 500,            //大图宽高变化的过渡时间，单位是毫秒
    showImageNumberLabel:           true,           //是否显示大图的图片数量信息文本
    wrapAround:                     false,          //查看大图是否可以循环切换
})
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="官网订阅组件"><a class="header" href="#官网订阅组件">官网订阅组件</a></h1>
<p><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/indexorder.html">官方文档</a>demo异常，该组件放到后面再看</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="六马系统使用的图册组件"><a class="header" href="#六马系统使用的图册组件">六马系统使用的图册组件</a></h1>
<blockquote>
<p>提供给六马系统使用的图册组件，兼容PC和移动端</p>
</blockquote>
<ul>
<li><a href="http://test.nie.163.com/test_html/nie-js/imageshow/">PC端demo</a></li>
<li><a href="http://test.nie.163.com/test_html/nie-js/imageshow/m.html">手机端demo</a></li>
<li><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/imageshow.html">原文档</a></li>
</ul>
<h2 id="使用-1"><a class="header" href="#使用-1">使用</a></h2>
<pre><code class="language-js">var ImageShow = nie.require(&quot;nie.util.imageshow&quot;);

ImageShow.init({
    container : &quot;#carousel&quot;, //放图册的容易ID
    host : 'tuku.my.163.com', //推荐图册的host，如果没有，请留空
    channel_id : '55ac5363d2742e1803904d04', //推荐图册的栏目ID，如果没有，请留空
    name : &quot;美女图集,看到流口水&quot;, //图册名字
    width : 600,    //图册宽度，默认为600
    link : 'http://www.baidu.com',   //图册实际地址，如果无，请留空
    type : &quot;pc&quot;, //图册类型，pc和m，两种，不填则自动根据当前是PC还是移动选择
    cur : 0, //图册初始化切换到第几张图，默认值为0，下标从0开始，超出图册长度则默认为0
    callback : function(page,type){ //翻页回调
        //当前页码，从0开始
        console.log(page);
        //翻页模式，1为普通，2为全屏
        console.log(type);
    },
    //图册数组
    data : [
        {
            thumb : &quot;http://c.cotton.netease.com/buckets/4EUyqb/files/ADJcjJLuiyR&quot;, //缩略图
            big : &quot;http://c.cotton.netease.com/buckets/4EUyqb/files/AZKWbqtYAxg&quot;, //大图
            desc : &quot;怒海龙吟：彼岸花ぃ晨曦&quot; //图描述
        },
        {
            thumb : &quot;http://c.cotton.netease.com/buckets/4EUyqb/files/FlXh3ca1WCh&quot;,
            big : &quot;http://c.cotton.netease.com/buckets/4EUyqb/files/4O8hKQOtFLM&quot;,
            desc : &quot;怒海龙吟：彼岸花ぃ晨曦2&quot;
        }
    ],
    //以下参数仅限移动端使用
    hide_footer : true, //不显示全屏下的底部说明
    pre_btn : &quot;.pre&quot;, //上一页按钮的选择器，样式需要自己控制
    next_btn : &quot;.next&quot;, //下一页按钮的选择器，样式需要自己控制
    full_btn : &quot;.full&quot; //显示全屏的按钮的选择器，样式需要自己控制
});
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="复制文本组件"><a class="header" href="#复制文本组件">复制文本组件</a></h1>
<p>用法如下：</p>
<blockquote>
<p><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/copy.html">官网</a>第二个<code>copy</code>多打了个t
<strong>注意：</strong><code>text</code>属性值，用jQuery取错值（如<code>input.text()</code>）不会报错，且剪切板不会替换为空<code>&quot;&quot;</code>，却能触发回调。经测试，能隐式转false的值都如此。</p>
</blockquote>
<pre><code class="language-js">var copy = nie.require(&quot;nie.util.copytext&quot;);

copy({
    btn : &quot;.copy&quot;,            // 点击按钮selector
    text : $(&quot;.text&quot;).val(), // 需要复制的文本
    callback : function (){   // 复制成功后，回调函数
        alert(&quot;复制成功！&quot;);
    }
});
</code></pre>
<blockquote>
<p>**注意：**以下用法无效，不知用法不对还是插件bug。</p>
</blockquote>
<p>或者：</p>
<ol>
<li>用jQuery 初始化点击按钮</li>
<li>参数1：需要复制的文本</li>
<li>参数2：复制成功后，回调函数</li>
</ol>
<pre><code class="language-js">var copy = nie.require(&quot;nie.util.copytext&quot;);

$(&quot;.copy&quot;).NIEcopyText( $(&quot;.text&quot;).text(), function (){
    alert(&quot;复制成功！&quot;);
});
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="弹层的使用普通的弹窗flash视频"><a class="header" href="#弹层的使用普通的弹窗flash视频">弹层的使用：普通的弹窗、flash、视频</a></h1>
<blockquote>
<p><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/pop.html">原文档</a></p>
</blockquote>
<blockquote>
<p>有时间自己修改下: 2023-07-20 17:43:03 tzj
- 没有模态窗样式
- a标签给个缩进样式直接看不见了
- 无脑<code>z-index:99999</code>也不好
- 太冗杂，只保留一个模态窗常用的即可</p>
</blockquote>
<h2 id="html结构"><a class="header" href="#html结构">html结构</a></h2>
<pre><code class="language-html">&lt;!--普通弹层--&gt;
&lt;div class=&quot;dTc&quot; id=&quot;shareTc&quot; style=&quot;display:none&quot;&gt;
    &lt;h3 class=&quot;hide&quot;&gt;分享赢龙马，送贴心防雾霭口罩&lt;/h3&gt;
    &lt;a class=&quot;aCloseQ&quot; href=&quot;javascript:void(0)&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;!--flash弹层--&gt;
&lt;div id=&quot;flashtc1&quot; class=&quot;dTc&quot; style=&quot;display:none&quot;&gt;
    &lt;a href=&quot;javascript:void(0)&quot; class=&quot;aCloseQ&quot;&gt;&lt;/a&gt;
    &lt;div id=&quot;flash-wrap&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!--视频弹层--&gt;
&lt;div class=&quot;dTc videoBox&quot; id=&quot;videoShow&quot; style=&quot;display: none&quot;&gt;
    &lt;a class=&quot;aCloseQ&quot; title=&quot;关闭&quot;&gt;关闭&lt;/a&gt;
    &lt;div class=&quot;dialogCon&quot;&gt;
        &lt;div class=&quot;dVideoBox&quot;&gt;&lt;div id=&quot;dVideo&quot;&gt;&lt;/div&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h2 id="css"><a class="header" href="#css">css</a></h2>
<pre><code class="language-css">/*弹层蒙版*/
.dTc{position:absolute;zoom:1;top:200px;z-index:999999}
.aCloseQ{display:block;position:absolute;right:21px;top:27px;width:20px;height:20px;cursor:pointer;text-indent: -9999px}
#NIE-overlayer{display:none;position:absolute;width:100%;height:100%;background:#000;filter:alpha(opacity=80);opacity:.8;top:0;left:0;z-index:99}
/*视频弹层*/
.videoBox {background: #000;}
.videoBox .dialogCon {overflow: hidden;padding: 5px;}
.videoBox .dVideoBox {border: 1px solid #999;padding: 4px;background: #666;}
.videoBox .aCloseQ {position: absolute;width: 57px;height: 57px;display: block;right: -57px;top: 0;cursor: pointer;overflow: hidden;text-indent: -9999px;background: url(http://res.nie.netease.com/tx3/gw/13v1/images/close.jpg) no-repeat 0 0;}
</code></pre>
<h2 id="js"><a class="header" href="#js">js</a></h2>
<pre><code class="language-js">$(function(){
    //-----------以下为普通弹层示例
    $('#pop1').click(function(){
        openD({
            id: '#shareTc',//弹出的弹层id
            type : '1'//1为普通弹层，2为flash弹层，3为视频弹层
        })
    })
    //-----------以下为flash弹层示例
    $('#pop2').click(function(){
        openD({
            id: '#flashtc1',//弹出的弹层id
            type : '2',//1为普通弹层，2为flash弹层，3为视频弹层
            width: '960',//弹层宽度
            height: '600',//弹层高度
            flashurl:'http://res.nie.netease.com/xy2/qt/14/0109_biwu/pop.swf',//弹层所需的flash地址
            wmode: 'opaque'
        })
    })
    //-----------以下为视频弹层示例
    $('#pop3').click(function(){
        openD({
            id: '#videoShow',//弹出的弹层id
            type : '3',//1为普通弹层，2为flash弹层，3为视频弹层
            width: '800',//弹层宽度
            height: '450',//弹层高度
            videourl:'http://v.nie.netease.com/tx3/2013/1231/longwu.f4v'//弹层所需的flash地址
        })
    })

})
//flash自己内部调用的函数
var closeMe = function(){
    $(&quot;#NIE-overlayer&quot;).hide();
    $('.aCloseQ').show();
    $('#flashtc1').hide();
}
</code></pre>
<h2 id="封装方法"><a class="header" href="#封装方法">封装方法</a></h2>
<pre><code class="language-js">//弹层
//--这个函数是将三种基本弹层合在一体的，所以代码会比较长一些，可以根据需求自己独立出来相对应的弹层代码
function openD(opt) {
//只针对一个tab con
    var settings = {
        id: '',
        type: '',//1为普通弹层，2为flash弹层，3为视频弹层
        width: '',//2和3需要使用
        height: '',//2和3需要使用
        flashurl: '',//2需要使用，flash地址
        videourl: '',//3需要使用，视频地址
        wmode: '',//2和3可能需要使用
        startImg: ''//3需要使用，视频截图
    }
    opt = opt || {};
    settings = $.extend(settings, opt);

    var popbg = $(&quot;#NIE-overlayer&quot;),
        popid = $(settings.id),
        type = settings.type,
        w = parseInt(settings.width),
        h = parseInt(settings.height),
        vimg = settings.startImg,
        furl = settings.flashurl,
        vurl = settings.videourl,
        wmode = settings.wmode,
        dh = $(document).height(),
        wh = $(window).height(),
        ww = $(window).width(),
        st = $(window).scrollTop(),
        sl = $(window).scrollLeft();
// 蒙版弹出
    popbg.css({&quot;height&quot;: dh}).show();

// 弹层弹出
    function posPop(idname) {
        idname.height() &gt; wh ? idname.fadeIn().css({
            'top': st,
            'left': (ww - idname.width()) / 2 + sl
        }) : idname.fadeIn().css({
            'top': (wh - idname.outerHeight()) / 2 + st,
            'left': (ww - idname.outerWidth()) / 2 + sl
        });
    }

//  弹层关闭
    $('.aCloseQ').click(function () {
        $(this).parent().fadeOut();
        $(&quot;#NIE-overlayer&quot;).hide();
    });
//判断弹层类别
    switch (type) {
        case '1':
            posPop(popid);
            break;
        case '2':
            $('#flash-wrap').html('');
            nie.use([&quot;util.swfobject&quot;], function () {
                $('#flash-wrap').flash({
                    swf: furl,
                    width: w,
                    height: h,
                    allowScriptAccess: 'always',
                    wmode: wmode
                });
            })
            var obj = $('#flashtc1');
            obj.css({'width': w, 'height': h});
            $('.aCloseQ').hide();//flash本身有做关闭按钮
            posPop(popid);

            break;
        case '3':
            $('#dVideo').html('').css({'height': h + 'px', 'width': w + 'px'});
            popid.css({'height': h + 22 + 'px', 'width': w + 22 + 'px'});
            posPop(popid);
            nie.use(['nie.util.video'], function () {
                nie.util.video($('#dVideo'), {
                    movieUrl: vurl,
                    mp4_movieUrl: vurl.replace(/\.(flv|f4v)/, '.mp4'),
                    width: w,
                    height: h,
                    startImg: vimg,
                    bufferTime: 5,
                    loopTimes: 0,
                    wmode: &quot;opaque&quot;,
                    volume: 0.8,
                    autoPlay: true
                });
            })
            break;
        default :
            break;
    }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="视频组件videov2"><a class="header" href="#视频组件videov2">视频组件videoV2</a></h1>
<ul>
<li><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/video.html">视频组件旧版</a></li>
<li><a href="http://webpack.nie.netease.com/index.html#pack=pc_inline/basic/video-new.html">视频组件新版原文档</a></li>
</ul>
<blockquote>
<p><strong>注意</strong> 使用该组件，全部不在html绑定<code>onclick</code>，因为会发错，比如这里的：停止、销毁、改变路径，报错：<code>not a function</code>。统一在js里添加事件监听</p>
</blockquote>
<ul>
<li>停止<code>video.stop()</code>: 无法再次播放</li>
<li>销毁<code>video.destroy()</code>: 销毁节点</li>
<li>改源<code>video.change()</code>: 改变路径后不会自动播放，即便设置了<code>autoPlay</code>，需要手动调用<code>video.play()</code>。</li>
</ul>
<pre><code class="language-js">var videoModule = nie.require(&quot;nie.util.videoV2&quot;);

var video = videoModule({
    fat : &quot;#video&quot;,//放视频的容器
    width:&quot;600&quot;,//视频宽度
    height:&quot;400&quot;,//视频高度
    //wmode:&quot;direct&quot;,//flash wmode值,默认direct
    movieUrl:&quot;&quot;,//标清视频地址
    HDmovieUrl : &quot;&quot;,//高清视频地址
    SHDmovieUrl : &quot;&quot;,//超清视频地址
    vtype : &quot;&quot;,//默认选用哪种清晰度，分别有d,hd,shd，默认不填则会采用校验网速然后自动匹配
    //autoPlay:false,//是否自动播放，默认false
    //startImg:null,//开始图片地址，默认false
    //loopTimes:0,//循环播放次数，默认0
    //maskImg:null,//整个flash顶部遮罩图片地址，默认null
    //bufferTime:5//缓冲时间（秒）,默认5
});

video.change(movieURL);//改变视频地址
video.pause();//暂停视频
video.stop();//停止视频
video.play();//播放视频
video.destroy();//清空并销毁视频
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="音频组件audio"><a class="header" href="#音频组件audio">音频组件audio</a></h1>
<blockquote>
<p>电脑音频驱动好像有问题，先搁置该组件</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="服务器时间组件bjtime"><a class="header" href="#服务器时间组件bjtime">服务器时间组件bjTime</a></h1>
<pre><code class="language-js">var Time = nie.require(&quot;util.bjTime&quot;);

Time.bjTime.getDate(function(time){
    console.log(time);
    //time.dateObj 时间对象
    //time.year 年份
    //time.month 月份
    //time.date 日
    //time.day 星期几的索引值
    //time.cnWeek 中文的星期几
    //time.monthTotalDay 本月总日数
    //time.firstDayCnWeek 本月1号 是星期几
    //time.weekNum 今天是本月第几周
});
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p>待编辑</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="栅格布局网格布局grid"><a class="header" href="#栅格布局网格布局grid">栅格布局网格布局grid</a></h1>
<ul>
<li>
<p><a href="https://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html">CSS Grid 网格布局教程</a>
.row {
position: relative;</p>
<p>.col-1 {
width: 8.33333%;
}</p>
<p>.col-2 {
width: 16.66667%;
}</p>
<p>.col-3 {
width: 16.66667%;
}</p>
<p>.col-4 {
width: 16.66667%;
}</p>
<p>.col-5 {
width: 16.66667%;
}</p>
<p>.col-6 {
width: 16.66667%;
}</p>
<p>.col-7 {
width: 16.66667%;
}</p>
<p>.col-8 {
width: 16.66667%;
}</p>
<p>.col-9 {
width: 16.66667%;
}</p>
<p>.col-10 {
width: 16.66667%;
}</p>
<p>.col-11 {
width: 16.66667%;
}</p>
<p>.col-12 {
width: 16.66667%;
}</p>
<p>.col-13 {
width: 16.66667%;
}</p>
<p>.col-14 {
width: 16.66667%;
}</p>
<p>.col-15 {
width: 16.66667%;
}</p>
<p>.col-16 {
width: 16.66667%;
}</p>
<p>.col-17 {
width: 16.66667%;
}</p>
<p>.col-18 {
width: 16.66667%;
}</p>
<p>.col3-19{
width: 16.66667%;
}</p>
<p>.col-20 {
width: 16.66667%;
}</p>
<p>.col-21 {
width: 16.66667%;
}</p>
<p>.col-22 {
width: 16.66667%;
}</p>
<p>.col-23 {
width: 16.66667%;
}</p>
<p>.col-24 {
width: 16.66667%;
}</p>
</li>
</ul>
<p>}</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="浏览器适配"><a class="header" href="#浏览器适配">浏览器适配</a></h1>
<blockquote>
<p>不同浏览器语法有区别，记录一下常用适配方法</p>
</blockquote>
<h2 id="前缀"><a class="header" href="#前缀">前缀</a></h2>
<ul>
<li>-webkit- （谷歌，Safari，新版Opera浏览器，所有基于WebKit 内核的浏览器）</li>
<li>-moz- （火狐浏览器）</li>
<li>-o- （旧版Opera浏览器）</li>
<li>-ms- （IE浏览器 和 Edge浏览器）</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="滚动条"><a class="header" href="#滚动条">滚动条</a></h1>
<h2 id="滚动条样式"><a class="header" href="#滚动条样式">滚动条样式</a></h2>
<blockquote>
<p>如果只是设置样式，不操作逻辑，完全可以自己写。</p>
</blockquote>
<pre><code class="language-less">.scroll(@width:0){
    /* 设置滚动条的宽度 */
    ::-webkit-scrollbar {
        width: @width;
    }
    /* 设置滚动条轨道的背景颜色 */
    ::-webkit-scrollbar-track {
        background-color: #f1f1f1;
    }
    /* 设置滚动条的滑块颜色 */
    ::-webkit-scrollbar-thumb {
        background-color: #888;
    }
    /* 设置滑块的圆角 */
    ::-webkit-scrollbar-thumb:vertical {
        border-radius: 5px;
    }
    /* 当鼠标悬停在滚动条上时的滑块颜色 */
    ::-webkit-scrollbar-thumb:hover {
        background-color: #555;
    }
}
</code></pre>
<h2 id="chrome"><a class="header" href="#chrome">chrome</a></h2>
<pre><code class="language-less">.scroll() {
    overflow: scroll;
    //width只对纵向滚动条生效
    //height只对横向滚动条生效

    // —— 滚动条总占位的 宽、高、背景色(白)、border，无hover
    ::-webkit-scrollbar {
        width: 100px;
        height: 30px;
        border: 1px solid pink;
    }

    // —— 轨道，背景色(红，图，display:none)、内阴影、圆角，有:hover
    ::-webkit-scrollbar-track {
        //background-color: #777;
    }


    //—— 滑块，背景色（黑）、内阴影、圆角，有:hover；
    // （滑块也可以分别设置，纵向滑块 —— ::-webkit-scrollbar-thumb:vertical，横向滑块 —— ::-webkit-scrollbar-thumb:horizontal）
    ::-webkit-scrollbar-thumb {
        background-color: #000;
    }

    // —— 两端按钮(两端的三角形按钮)，默认display: none;(红，图)，有:hover
    ::-webkit-scrollbar-button {
        background-color: #777;
        width: 10px;
        height: 4px;
    }

    // —— 右下角汇合处样式，默认display: none;(白，图)
    ::-webkit-scrollbar-corner {
    }


    ::-webkit-resizer {
    }
    // ：两个滚动条交汇处用于拖动调整元素大小的小控件 —— x

    ::-webkit-scrollbar-track-piece {
    }
    // ：轨道，会覆盖2轨道（图，色，display: none） —— x
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="不规则div点击事件"><a class="header" href="#不规则div点击事件">不规则div点击事件</a></h1>
<blockquote>
<p>现有一个图片素材：划分为多个区域，分别点击触发对应事件</p>
<p>先在PS中找出各个转折点的坐标（相对左上角）则六个区域的顶点坐标如下：</p>
</blockquote>
<p><img src="./img/899_coordinate.jpg" alt="坐标" /></p>
<style>
.box{
    width: 76px;
    height: 163px;
    overflow: hidden;
}
.box>div{
    transform: translate(-45%, -45%) scale(0.1);
}
</style>
<h2 id="一div旋转层级"><a class="header" href="#一div旋转层级">一、div旋转、层级</a></h2>
<p>示例：(点击各区域查看控制台)</p>
<hr />
<style>
    #test1 {
        width: 750px;
        height: 1624px;
        position: relative;
        overflow: hidden;
        background-image: url(./img/899_bg.png);
        border: 1px solid;
        /*transform: scale(0.1);*/
    }

    #test1 > div {
        /*border: 1px solid red;*/
        height: 100px;
        width: 100px;
        position: absolute;
    }

    #test1 > div:nth-child(1) {
        width: 444px;
        height: 800px;
        top: -39px;
        transform-origin: top left;
        transform: rotate(5deg);
        z-index: 1;
    }

    #test1 > div:nth-child(2) {
        left: 468px;
        top: -31px;
        width: 347px;
        height: 831px;
        transform-origin: top left;
        transform: rotate(6deg);
        z-index: 2;
    }

    #test1 > div:nth-child(3) {
        transform-origin: top left;
        transform: rotate(54deg);
        top: 304px;
        width: 637px;
        height: 477px;
        z-index: 3;

    }

    #test1 > div:nth-child(4) {
        transform-origin: top left;
        transform: rotate(47deg);
        top: 324px;
        left: -89px;
        width: 674px;
        height: 518px;
        z-index: 3;
    }

    #test1 > div:nth-child(5) {
        top: 829px;
        z-index: 4;
        left: 375px;
        transform-origin: top left;
        transform: rotate(46deg);
        width: 453px;
        height: 750px;

    }

    #test1 > div:nth-child(6) {
        top: 839px;
        z-index: 5;
        transform-origin: left;
        transform: rotate(5deg);
        left: 342px;
        text-align: right;
        width: 450px;
        height: 794px;
    }

    #test1 > div:nth-child(7) {
        top: 815px;
        z-index: 6;
        left: 391px;
        transform-origin: left top;
        transform: rotate(-37deg);
        width: 469px;
        height: 664px;
    }
    #test1 > div:nth-child(8) {
        z-index: 6;
        left: 388px;
        top: 812px;
        transform-origin: left top;
        transform: rotate(-43deg);
        width: 488px;
        height: 536px;
    }
</style>
<div class="box">
<div id="test1">
    <div onclick="box(1)">1</div>
        <div onclick="box(2)">2</div>
    <!--    <div onclick="box(2)">2</div>-->
        <div onclick="box(3)">3</div>
        <div onclick="box(3)">3</div>
        <div onclick="box(4)">4</div>
        <div onclick="box(5)">5</div>
        <div onclick="box(6)">6</div>
        <div onclick="box(6)">6</div>
</div>
</div>
<script>
    function box(i) {
        console.log("点击的第" + i + "个")
    }
</script>
<blockquote>
<p>设置多个div，旋转实现，要是不够，可适当多个拼接。笨方法，知识要求低，调整很麻烦。</p>
</blockquote>
<pre><code class="language-css">#test1 {
    width: 750px;
    height: 1624px;
    position: relative;
    overflow: hidden;
    background-image: url(./img/899_bg.png);
    border: 1px solid;
}

#test1 &gt; div {
    /*border: 1px solid red;*/
    height: 100px;
    width: 100px;
    position: absolute;
}

#test1 &gt; div:nth-child(1) {
    width: 444px;
    height: 800px;
    top: -39px;
    transform-origin: top left;
    transform: rotate(5deg);
    z-index: 1;
}

#test1 &gt; div:nth-child(2) {
    left: 468px;
    top: -31px;
    width: 347px;
    height: 831px;
    transform-origin: top left;
    transform: rotate(6deg);
    z-index: 2;
}

#test1 &gt; div:nth-child(3) {
    transform-origin: top left;
    transform: rotate(54deg);
    top: 304px;
    width: 637px;
    height: 477px;
    z-index: 3;

}

#test1 &gt; div:nth-child(4) {
    transform-origin: top left;
    transform: rotate(47deg);
    top: 324px;
    left: -89px;
    width: 674px;
    height: 518px;
    z-index: 3;
}

#test1 &gt; div:nth-child(5) {
    top: 829px;
    z-index: 4;
    left: 375px;
    transform-origin: top left;
    transform: rotate(46deg);
    width: 453px;
    height: 750px;

}

#test1 &gt; div:nth-child(6) {
    top: 839px;
    z-index: 5;
    transform-origin: left;
    transform: rotate(5deg);
    left: 342px;
    text-align: right;
    width: 450px;
    height: 794px;
}

#test1 &gt; div:nth-child(7) {
    top: 815px;
    z-index: 6;
    left: 391px;
    transform-origin: left top;
    transform: rotate(-37deg);
    width: 469px;
    height: 664px;
}

#test1 &gt; div:nth-child(8) {
    z-index: 6;
    left: 388px;
    top: 812px;
    transform-origin: left top;
    transform: rotate(-43deg);
    width: 488px;
    height: 536px;
}
</code></pre>
<pre><code class="language-js">function box(i) {
    console.log(&quot;点击的第&quot; + i + &quot;个&quot;)
}
</code></pre>
<pre><code class="language-html">
&lt;div id=&quot;test1&quot;&gt;
    &lt;div onclick=&quot;box(1)&quot;&gt;1&lt;/div&gt;
    &lt;div onclick=&quot;box(2)&quot;&gt;2&lt;/div&gt;
    &lt;!--    &lt;div onclick=&quot;box(2)&quot;&gt;2&lt;/div&gt;--&gt;
    &lt;div onclick=&quot;box(3)&quot;&gt;3&lt;/div&gt;
    &lt;div onclick=&quot;box(3)&quot;&gt;3&lt;/div&gt;
    &lt;div onclick=&quot;box(4)&quot;&gt;4&lt;/div&gt;
    &lt;div onclick=&quot;box(5)&quot;&gt;5&lt;/div&gt;
    &lt;div onclick=&quot;box(6)&quot;&gt;6&lt;/div&gt;
    &lt;div onclick=&quot;box(6)&quot;&gt;6&lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h2 id="二map"><a class="header" href="#二map">二、map</a></h2>
<p>示例：</p>
<hr />
<div class="box">
    <div id="test2">
      <img src="./img/899_bg.png" usemap="#myMap" alt="">
      <map name="myMap">
        <!-- 在这里添加具体的非长方形区域 -->
        <area shape="poly" coords="0,0,447,0,379,812,0,294" href="javascript:void(0)" alt="区域1">
        <area shape="poly" coords="447,0,379,812,750,480,750,0" href="javascript:void(0)" alt="区域2">
        <area shape="poly" coords="0,294,379,812,0,1164" href="javascript:void(0)" alt="区域3">
        <area shape="poly" coords="0,1164,379,812,313,1624,0,1624" href="javascript:void(0)" alt="区域4">
        <area shape="poly" coords="379,812,313,1624,750,1624,750,1342" href="javascript:void(0)" alt="区域5">
        <area shape="poly" coords="379,812,750,1342,750,480" href="javascript:void(0)" alt="区域6">
      </map>
    </div>
</div>
<style>
#test2{
    border: 1px solid;
     width: 750px;
        height: 1624px;
}
#test2>img{
    width: 750px;
}
</style>
<script>
let areas = document.querySelectorAll('#test2 area');
areas.forEach(function (area,index) {
    area.addEventListener('click', function (event) {
        event.preventDefault();
        console.log(area.alt,index);
    })
})
</script>
<blockquote>
<p><code>coords</code>的属性值单位是<code>px</code>，适配屏幕时，要重新计算。参考<a href="./996.html#%E8%8E%B7%E5%8F%96px%E5%80%BC">获取px值</a></p>
</blockquote>
<pre><code class="language-html">
&lt;div id=&quot;myDiv&quot;&gt;
    &lt;img src=&quot;your-image.jpg&quot; usemap=&quot;#myMap&quot;&gt;
    &lt;map name=&quot;myMap&quot;&gt;
        &lt;!-- 在这里添加具体的非长方形区域 --&gt;
        &lt;area shape=&quot;poly&quot; coords=&quot;x1,y1,x2,y2,x3,y3,...&quot; href=&quot;#&quot; alt=&quot;区域1&quot;&gt;
        &lt;area shape=&quot;poly&quot; coords=&quot;x1,y1,x2,y2,x3,y3,...&quot; href=&quot;#&quot; alt=&quot;区域2&quot;&gt;
        &lt;area shape=&quot;poly&quot; coords=&quot;x1,y1,x2,y2,x3,y3,...&quot; href=&quot;#&quot; alt=&quot;区域3&quot;&gt;
        ...
    &lt;/map&gt;
&lt;/div&gt;

</code></pre>
<pre><code class="language-js">let areas = document.querySelectorAll('#myDiv area');
areas.forEach(function (area, index) {
    area.addEventListener('click', function (event) {
        event.preventDefault();
        console.log(area.alt, index);
    })
})
</code></pre>
<h2 id="三数学函数"><a class="header" href="#三数学函数">三、数学函数</a></h2>
<p>示例：</p>
<hr />
<style>
#test3{
    width: 750px;
    height: 1624px;
    background-image: url("./img/899_bg.png");
    border: 1px solid;
}
</style>
<div class="box">
   <div id="test3"></div>
</div>
<script>
function findLineEquation(x1, y1, x2, y2) {
    let a = (y2 - y1) / (x2 - x1);
    let b = y1 - a * x1;
    return (x, y) => {
        let _y = a * x + b;
        return  y < _y;
    };
}

// 三条直线的函数：
let f1 = findLineEquation(0, 294, 750, 1342);
let f2 = findLineEquation(447, 0, 313, 1624);
let f3 = findLineEquation(0, 1164, 750, 480);

document.getElementById("test3").addEventListener("click", function (event) {
    let x = event.offsetX;
    let y = event.offsetY;
console.group("示例3：点击");
    console.log("点击位置的坐标： x=" + x + ", y=" + y);
    let b1 = f1(x, y);// 点击位置是否在f1的上方
    let b2 = f2(x, y);
    let b3 = f3(x, y);
    console.log(b1,b2,b3);
    if(b1&&b2){
        console.log(1);
    }else if(!b2 && b3){
        console.log(2);
    }else if(!b1 && b3){
        console.log(3);
    }else if(b2 && !b3){
        console.log(4);
    }else if(!b1 && !b2){
        console.log(5);
    }else if(b1 && !b3){
        console.log(6);
    }else{
        console.log("边框？还是逻辑错误？");
    }
console.groupEnd()
});
</script>
<blockquote>
<p>让父级div触发同一个点击事件，然后判断点击的位置，代入预设好的数学函数中，满足哪个，就触发其方法。</p>
<p>这里示例设置的是<code>transform: scale(0.1);</code>，缩小后对点击完全无影响。如果用的rem导致宽高自适应变化时，应该不行，待测。</p>
</blockquote>
<pre><code class="language-js">function findLineEquation(x1, y1, x2, y2) {
    let a = (y2 - y1) / (x2 - x1);
    let b = y1 - a * x1;
    return (x, y) =&gt; {
        let _y = a * x + b;// _y=f(x)
        return y &lt; _y; // 点击位置是否在直线的上方
    };
}

// 三条直线的函数：
let f1 = findLineEquation(0, 294, 750, 1342);
let f2 = findLineEquation(447, 0, 313, 1624);
let f3 = findLineEquation(0, 1164, 750, 480);

document.getElementById(&quot;test3&quot;).addEventListener(&quot;click&quot;, function (event) {
    let x = event.offsetX;
    let y = event.offsetY;
    console.log(&quot;点击位置的坐标： x=&quot; + x + &quot;, y=&quot; + y);
    let b1 = f1(x, y);// 点击位置是否在f1的上方
    let b2 = f2(x, y);
    let b3 = f3(x, y);
    console.log(b1, b2, b3);
    if (b1 &amp;&amp; b2) {
        console.log(1);
    } else if (!b2 &amp;&amp; b3) {
        console.log(2);
    } else if (!b1 &amp;&amp; b3) {
        console.log(3);
    } else if (b2 &amp;&amp; !b3) {
        console.log(4);
    } else if (!b1 &amp;&amp; !b2) {
        console.log(5);
    } else if (b1 &amp;&amp; !b3) {
        console.log(6);
    } else {
        console.log(&quot;边框？还是逻辑错误？&quot;);
    }
});
</code></pre>
<h2 id="四css"><a class="header" href="#四css">四、css</a></h2>
<blockquote>
<p>参考<a href="https://www.runoob.com/cssref/pr-clip-path.html">CSS clip-path 属性</a></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="屏幕适配rem"><a class="header" href="#屏幕适配rem">屏幕适配rem</a></h1>
<blockquote>
<p>项目中要使用<code>rem</code>，且适配不同屏幕自动缩放</p>
<p>1rem = 【html font-size（默认16px）】 * 【比例（初始设置625%）】 = 【默认值（100px）】</p>
</blockquote>
<h3 id="缩放处理"><a class="header" href="#缩放处理">缩放处理</a></h3>
<pre><code class="language-css">html {
    height: 100%;
    font-size: 625%;
}
</code></pre>
<pre><code class="language-js">const Utils = {
    // 适配屏幕比例
    get scale() {
        let scale = 625;
        let w = document.documentElement.clientWidth;
        let h = document.documentElement.clientHeight;
        if (w &lt; 1400) {
            scale = 1400 / 1920 * 625;
        }
        /*else if(w &gt; 1920){ //如果需求方需要大于1920左右留白
            _fontsize = 625
        }*/
        else if (w / h &gt; 3) {
            scale = h * 3 / 1920 * 625;
        } else {
            scale = w / 1920 * 625;
        }
        return scale;
    }
}

const initScreen = function (callback) {//初始化html  font-size
    $(&quot;html&quot;).css(&quot;font-size&quot;, Utils.scale + &quot;%&quot;);
    if (callback) callback();
}
$(document).ready(() =&gt; {
    initScreen();
})

$(window).resize(function () {
    initScreen();
})
</code></pre>
<h3 id="获取px值"><a class="header" href="#获取px值">获取px值</a></h3>
<blockquote>
<p>很多插件的参数只能用px，而使用以上代码后，rem值是固定的，但px值不确定，这里封装下。</p>
</blockquote>
<pre><code class="language-js">const Utils = {
    // 适配屏幕比例
    get scale() {
        // ......
    },

    /**
     * 像素计算
     * @param n{number} 默认比例下的初始像素值
     * @return {number} 当前比例下的像素值
     * */
    getPx(n) {
        return (n / 100) * this.scale * 16 / 100;
    }
}
</code></pre>
<p>调用的时候：</p>
<pre><code class="language-js">// plugin：只支持px的插件方法名
plugin({
    width: Utils.getPx(100)// 传入原比例时像素值
})
</code></pre>
<h3 id="其他"><a class="header" href="#其他">其他</a></h3>
<blockquote>
<p>长屏有滚动条时，则比例就不是625%，控制台显示的也不是原大小。可以设置隐藏滚动条但不禁用，仅用于调试，后面记得删。</p>
</blockquote>
<pre><code class="language-css">/* 设置滚动条的宽度 */
::-webkit-scrollbar {
    width: 0;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="局部刷新"><a class="header" href="#局部刷新">局部刷新</a></h1>
<blockquote>
<p>查询数据渲染到页面时，如果每次清空节点，重新生成，性能消耗很大，用户体验很差。在这点上，vue就已经做得很好了，不是操作整个dom，而是更新数据。</p>
<p>在有些场景下，不使用vue等框架，就只能自己写了。</p>
<p>例如初始化写一页10个item，设置好style，数据留空，给class默认<code>display:none</code></p>
<p>查询到数据时，遍历更新dom数据，超出的dom隐藏</p>
<p>难点在于：有内容（text）有属性（attribute）、有事件，要封装的话就得深入理解vue原理，自己用js或jQuery简单封装。</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="html转画布工具html2canvas"><a class="header" href="#html转画布工具html2canvas">html转画布工具html2canvas</a></h1>
<ul>
<li><a href="https://html2canvas.hertzen.com/">官方文档</a></li>
<li><a href="https://github.com/niklasvh/html2canvas">github</a></li>
<li><a href="http://t.csdn.cn/URaDT">参考文章：html2canvas使用教程</a></li>
</ul>
<blockquote>
<p>该插件是将html元素生成为<code>&lt;canvas&gt;</code>。</p>
</blockquote>
<h2 id="贴代码常用模板"><a class="header" href="#贴代码常用模板">贴代码：常用模板</a></h2>
<pre><code class="language-js">let dom = document.querySelector(&quot;#root&quot;);// 不能用jQuery取
$(dom).show();
html2canvas(dom, {}).then(canvas =&gt; {
    // 成功回调
    $(dom).after($(canvas));
    $(dom).hide();
})
</code></pre>
<h3 id="语法"><a class="header" href="#语法">语法</a></h3>
<blockquote>
<p>调用时，目标节点必须可见，且不能超出可见范围，所见即所得。</p>
<p>部分css样式该插件无法识别，如文字纵向、<code>border-image-source</code>等</p>
</blockquote>
<pre><code class="language-js">html2canvas(element, options);
</code></pre>
<pre><code class="language-js">let dom = document.querySelector(&quot;#root&quot;);// 不能用jQuery取
html2canvas(dom, {}).then(canvas =&gt; {
    // 成功回调
    $(dom).after($(canvas));
    $(dom).hide();
    // let imgUrl = canvas.toDataURL();
    // imgDom.attr(src,imgUrl);
})
</code></pre>
<h3 id="属性选项"><a class="header" href="#属性选项">属性选项</a></h3>
<div class="table-wrapper"><table><thead><tr><th>属性名</th><th>默认值</th><th>描述</th></tr></thead><tbody>
<tr><td>allowTaint</td><td>FALSE</td><td>是否允许跨域图像。会污染画布，导致无法使用canvas.toDataURL 方法</td></tr>
<tr><td>backgroundColor</td><td>#ffffff</td><td>画布背景色（如果未在DOM中指定）。设置null为透明</td></tr>
<tr><td>canvas</td><td>null</td><td>现有canvas元素用作绘图的基础</td></tr>
<tr><td>foreignObjectRendering</td><td>FALSE</td><td>如果浏览器支持，是否使用ForeignObject渲染</td></tr>
<tr><td>imageTimeout</td><td>15000</td><td>加载图像的超时时间（以毫秒为单位）。设置0为禁用超时。</td></tr>
<tr><td>ignoreElements</td><td>(element) =&gt; false</td><td>谓词功能，可从渲染中删除匹配的元素。</td></tr>
<tr><td>logging</td><td>TRUE</td><td>启用日志以进行调试</td></tr>
<tr><td>onclone</td><td>null</td><td>克隆文档以进行渲染时调用的回调函数可用于修改将要渲染的内容，而不会影响原始源文档。</td></tr>
<tr><td>proxy</td><td>null</td><td>代理将用于加载跨域图像的网址。如果保留为空，则不会加载跨域图像。</td></tr>
<tr><td>removeContainer</td><td>TRUE</td><td>是否清除html2canvas临时创建的克隆DOM元素</td></tr>
<tr><td>scale</td><td>window.devicePixelRatio</td><td>用于渲染的比例。默认为浏览器设备像素比率。</td></tr>
<tr><td>useCORS</td><td>FALSE</td><td>是否尝试使用CORS从服务器加载图像</td></tr>
<tr><td>width</td><td>Element width</td><td>canvas的宽度</td></tr>
<tr><td>height</td><td>Element height</td><td>canvas的高度</td></tr>
<tr><td>x</td><td>Element x-offset</td><td>裁剪画布X坐标</td></tr>
<tr><td>y</td><td>Element y-offset</td><td>裁剪画布y坐标</td></tr>
<tr><td>scrollX</td><td>Element scrollX</td><td>渲染元素时要使用的x滚动位置（例如，如果Element使用position: fixed）</td></tr>
<tr><td>scrollY</td><td>Element scrollY</td><td>呈现元素时要使用的y-scroll位置（例如，如果Element使用position: fixed）</td></tr>
<tr><td>windowWidth</td><td>Window.innerWidth</td><td>渲染时使用的窗口宽度Element，这可能会影响媒体查询之类的内容</td></tr>
<tr><td>windowHeight</td><td>Window.innerHeight</td><td>渲染时要使用的窗口高度Element，这可能会影响媒体查询之类的内容</td></tr>
</tbody></table>
</div>
<h3 id="尺寸处理"><a class="header" href="#尺寸处理">尺寸处理</a></h3>
<blockquote>
<p>由于项目中需要用<code>rem</code>，并进行屏幕适配自动缩放。而该插件宽高只能用数字<code>number</code>
，故而需要处理一下。参考：<a href="./996.html">屏幕适配rem</a></p>
</blockquote>
<pre><code class="language-js">html2canvas(dom, {
    width: Utils.getPx(100)// 100为初始比例像素值
})
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="文字生成二维码qrcode"><a class="header" href="#文字生成二维码qrcode">文字生成二维码QRCode</a></h1>
<ul>
<li><a href="https://github.com/jeromeetienne/jquery-qrcode">jquery.qrcode.js</a></li>
<li><a href="https://github.com/davidshimjs/qrcodejs">qrcode.js</a></li>
</ul>
<blockquote>
<p>先是jquery.qrcode，没什么好说的，引入<code>jQuery.js</code>，再引入<code>jquery.qrcode.js</code></p>
<p>相当于<code>$(&quot;#test&quot;).append(canvas)</code>，返回jquery节点<code>$(canvas)</code>。</p>
<p><code>Utils.getPx()</code>是自己封装的，见<a href="./996.html">屏幕适配rem</a></p>
</blockquote>
<pre><code class="language-js">$(&quot;#test&quot;).qrcode({
    width: Utils.getPx(118),
    height: Utils.getPx(118),
    // correctLevel: 3,
    text: window.location.href, //内容
    // typeNumber: -1, //计算模式
    // background: &quot;#fff&quot;, //背景颜色
    // foreground: &quot;#000&quot;, //二维码颜色
});
</code></pre>
<blockquote>
<p>qrcode.js和上面用法差不多，第一个参数为id或者document，不依赖jQuery库。返回canvas节点对象</p>
</blockquote>
<pre><code class="language-js">new QRCode(&quot;test&quot;, {
    text: window.location.href,
    width: Utils.getPx(118),
    height: Utils.getPx(118),
    // colorDark : &quot;#000000&quot;,
    // colorLight : &quot;#ffffff&quot;,
    // correctLevel : QRCode.CorrectLevel.H // 默认等级2，可全局配置
});
</code></pre>
<blockquote>
<p>足够简单使用了，详细参数用到再写上</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="字体包压缩fontmin"><a class="header" href="#字体包压缩fontmin">字体包压缩fontmin</a></h1>
<ul>
<li><a href="https://note.youdao.com/ynoteshare/index.html?id=cb1558aef6616eb7f69279b71681631a&amp;type=note&amp;_time=1690798657543">自动提取字体工具</a></li>
<li><a href="http://ecomfe.github.io/fontmin">fontmin官网</a></li>
<li><a href="https://github.com/ecomfe/fontmin">fontmin<img src="img%2Ficon-github.png" alt="icon-github.png" /></a></li>
<li><a href="https://github.com/Jack-Sparrow/charactor-scanner">扫描本地文件提取文本<img src="img%2Ficon-github.png" alt="icon-github.png" /></a></li>
</ul>
<blockquote>
<p>要求不能占用太多服务器内存，而部分项目对字体有要求，可进行字体包压缩</p>
</blockquote>
<h3 id="fontmin"><a class="header" href="#fontmin">fontmin</a></h3>
<pre><code class="language-shell">cnpm install --save fontmin
</code></pre>
<pre><code class="language-js">// npm install --save fontmin

var Fontmin = require('fontmin');   

var srcPath = './fonts/source_han_serif_cn_heavy.ttf'; // 字体源文件
var destPath = './myFonts';    // 输出路径
var text = `
这里填入要生成的文字
0123456789
abcdefghijklmnopqrstuvwxyz
ABCDEFGHIJKLMNOPQRSTUVWXYZ
`

// 初始化
var fontmin = new Fontmin()
    .src(srcPath)               // 输入配置
    .use(Fontmin.glyph({        // 字型提取插件
        text: text              // 所需文字
    }))
    // .use(Fontmin.ttf2eot())     // eot 转换插件
    // .use(Fontmin.ttf2woff())    // woff 转换插件
    // .use(Fontmin.ttf2svg())     // svg 转换插件
    // .use(Fontmin.css())         // css 生成插件
    .dest(destPath);            // 输出配置

// 执行
fontmin.run(function (err, files, stream) {

    if (err) throw err;

    console.log('done');        // 成功
});
</code></pre>
<h3 id="fontcreator"><a class="header" href="#fontcreator">FontCreator</a></h3>
<blockquote>
<p>以上方法要.ttf文件，转格式软件：<a href="https://pan.baidu.com/share/init?surl=VfYfG1LEjfFKRNPXCYvvcQ&amp;pwd=uckf">下载地址</a>，文件file-&gt;打开open-&gt;字体文件font file-&gt;文件夹选择字体，首次打开很慢，等会。然后另存为<code>.ttf</code>格式</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="node"><a class="header" href="#node">node</a></h1>
<ul>
<li><a href="https://nodejs.org/zh-cn">nodejs<img src="https://nodejs.org/static/images/logo.svg" alt="nodejs" /></a></li>
<li><a href="https://nodejs.org/zh-cn/download/releases">node历史版本</a></li>
<li><a href="https://github.com/coreybutler/nvm-windows/releases">NVM<img src="img%2Ficon-github.png" alt="icon-github.png" /></a></li>
<li><a href="https://github.com/npm/">npm<img src="img%2Ficon-github.png" alt="icon-github.png" /></a></li>
<li><a href="https://nvm.uihtm.com/"><img src="https://nvm.uihtm.com/images/logo.png" alt="NVM" /></a></li>
<li><a href="https://www.npmjs.com/">npmjs</a></li>
<li><a href="https://npmmirror.com/">淘宝镜像cnpm</a></li>
<li><a href="http://npm.taobao.org/mirrors/npm/">淘宝镜像下载npm</a></li>
<li><a href="http://t.csdn.cn/ZAVRF">nvm（node版本管理工具）下载及安装教程以及npm安装</a></li>
</ul>
<h2 id="一nvm"><a class="header" href="#一nvm">一、nvm</a></h2>
<blockquote>
<p>来回手动切换版本，很不方便很不保险，使用node版本管理工具：NVM。</p>
</blockquote>
<ul>
<li>卸载node，删除相关文件夹</li>
<li>去官网下载安装</li>
<li>安装检测：<code>nvm -v</code>、<code>node -v</code></li>
<li>若版本管理里没有想要的，在nvm安装目录（<code>C:\Users\Admin\AppData\Roaming\nvm</code>）下新建目录，去官网找到指定版本装到此处</li>
</ul>
<h3 id="1-常用指令"><a class="header" href="#1-常用指令">1. 常用指令</a></h3>
<pre><code>nvm arch：显示node是运行在32位还是64位。
nvm install &lt;version&gt; [arch] ：安装node， version是特定版本也可以是最新稳定版本latest。可选参数arch指定安装32位还是64位版本，默认是系统位数。可以添加--insecure绕过远程服务器的SSL。
nvm list [available] ：显示已安装的列表。可选参数available，显示可安装的所有版本。list可简化为ls。
nvm on ：开启node.js版本管理。
nvm off ：关闭node.js版本管理。
nvm proxy [url] ：设置下载代理。不加可选参数url，显示当前代理。将url设置为none则移除代理。
nvm node_mirror [url] ：设置node镜像。默认是https://nodejs.org/dist/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。
nvm npm_mirror [url] ：设置npm镜像。https://github.com/npm/cli/archive/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。
nvm uninstall &lt;version&gt; ：卸载指定版本node。
nvm use [version] [arch] ：使用制定版本node。可指定32/64位。
nvm root [path] ：设置存储不同版本node的目录。如果未设置，默认使用当前目录。
nvm version ：显示nvm版本。version可简化为v。
</code></pre>
<h3 id="2-nvm切换国内镜像"><a class="header" href="#2-nvm切换国内镜像">2. nvm切换国内镜像</a></h3>
<blockquote>
<p>如果下载node过慢或者安装失败，请更换国内镜像源,</p>
<p>在 nvm 的安装路径下，找到 （默认地址：<code>C:\Users\Admin\AppData\Roaming\nvm\settings.txt</code>）settings.txt，</p>
<p>设置node_mirro与npm_mirror为国内镜像地址。下载就飞快了~~</p>
</blockquote>
<pre><code class="language-text">root: D:\nvm
path: D:\nodejs
nvm npm_mirror https://npmmirror.com/mirrors/npm/
nvm node_mirror https://npmmirror.com/mirrors/node/
</code></pre>
<p>或者：</p>
<pre><code class="language-text">node_mirror: https://npm.taobao.org/mirrors/node/
npm_mirror: https://npm.taobao.org/mirrors/npm/
</code></pre>
<p>指令切换：</p>
<pre><code class="language-shell">nvm npm_mirror https://npmmirror.com/mirrors/npm/
nvm node_mirror https://npmmirror.com/mirrors/node/
</code></pre>
<h3 id="3-指令demo"><a class="header" href="#3-指令demo">3. 指令demo</a></h3>
<pre><code class="language-shell">nvm list
</code></pre>
<pre><code class="language-shell">nvm list available
</code></pre>
<pre><code class="language-shell">nvm install 16.17.0
</code></pre>
<pre><code class="language-shell">nvm use 14.21.3
</code></pre>
<h3 id="4-低版本安装npm"><a class="header" href="#4-低版本安装npm">4. 低版本安装npm</a></h3>
<p>查看node版本</p>
<ul>
<li>去<a href="https://nodejs.org/zh-cn/download/releases/">这里→</a>看对应npm版本</li>
<li>去<a href="http://npm.taobao.org/mirrors/npm/">淘宝→</a>找到对应版本并下载</li>
<li>放到nvm目录下指定版本里的<code>node_moudle</code>下，如：<code>C:\Users\Admin\AppData\Roaming\nvm\v14.21.3\node_modules</code>
并将<code>cli-6.14.18</code>改名为<code>npm</code></li>
<li>然后将npm里的bin下的<code>npm</code>、<code>npm.cmd</code>放到node版本目录下，如<code>C:\Users\Admin\AppData\Roaming\nvm\v14.21.3</code>，要用npx的话也同理</li>
<li><code>npm -v</code></li>
</ul>
<h2 id="二手动操作"><a class="header" href="#二手动操作">二、手动操作</a></h2>
<h3 id="安装"><a class="header" href="#安装">安装</a></h3>
<ul>
<li>官网选择版本安装</li>
<li>低版本手动配置环境变量</li>
</ul>
<pre><code class="language-shell">node -v
</code></pre>
<blockquote>
<p>全局依赖默认地址：<code>C:\Users\Admin\AppData\Roaming\npm\node_modules</code></p>
</blockquote>
<pre><code class="language-shell">npm i -g [依赖名]
</code></pre>
<h3 id="卸载"><a class="header" href="#卸载">卸载</a></h3>
<ul>
<li>电脑系统里卸载<code>Node.js</code></li>
<li>删除文件夹：<code>C:\Users\Admin\AppData\Roaming\npm</code>、<code>C:\Users\Admin\AppData\Roaming\npm-cache</code></li>
</ul>
<h2 id="三node常用指令"><a class="header" href="#三node常用指令">三、node常用指令</a></h2>
<h2 id="四常用依赖包"><a class="header" href="#四常用依赖包">四、常用依赖包</a></h2>
<h2 id="五镜像配置"><a class="header" href="#五镜像配置">五、镜像配置</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="feg"><a class="header" href="#feg">feg</a></h1>
<ul>
<li><a href="http://feg.netease.com/archives/fis-parser-babel-qa.html">Babel插件在fis项目中遇到的问题</a></li>
</ul>
<h2 id="安装-1"><a class="header" href="#安装-1">安装</a></h2>
<blockquote>
<p>使用exe安装包或者npm：</p>
<p>node说是推荐8以上，实际16以上报错，10可以，其他待测。</p>
</blockquote>
<pre><code class="language-shell">npm i -g feg
</code></pre>
<blockquote>
<p>装完后还得安装编译插件</p>
</blockquote>
<pre><code class="language-shell">npm install -g fis3-parser-babel
</code></pre>
<h2 id="常用命令"><a class="header" href="#常用命令">常用命令</a></h2>
<pre><code class="language-shell"># 启动服务
feg server start
# 调试
feg release -wL
# 打本地包
feg release local
# 打测试包
feg release dist
# 打正式包
feg release release
# 关闭服务
feg server stop
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rime小狼毫"><a class="header" href="#rime小狼毫">rime小狼毫</a></h1>
<blockquote>
<p>RIME输入法：轻便、灵活性高、高可定制、难入门。适合多语言、小众语言输入，初次配置很难，最好有编程经验，后面会特别方便。没有智能纠错、云输入，既是优点也是缺点。</p>
<p>这里只用window系统的<code>小狼毫</code>，记录简单使用过程。</p>
</blockquote>
<ul>
<li><a href="https://rime.im/">官网</a></li>
<li><a href="https://github.com/rime/">Rime <img src="img/icon-github.png" alt="icon-github.png" /></a></li>
</ul>
<h2 id="一初始"><a class="header" href="#一初始">一、初始</a></h2>
<h3 id="1-安装"><a class="header" href="#1-安装">1. 安装</a></h3>
<blockquote>
<p>去<a href="https://rime.im/">官网</a>直接下就好，先默认安装。不行就直接搜，是开源软件。</p>
</blockquote>
<h3 id="2-设置简中"><a class="header" href="#2-设置简中">2. 设置简中</a></h3>
<ul>
<li>用户文件夹，默认<code>C:\Users\Admin\AppData\Roaming\Rime</code></li>
<li>默认配置文件：<code>default.custom.yaml</code></li>
<li><code>schema</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="文件上传file-upload"><a class="header" href="#文件上传file-upload">文件上传file upload</a></h1>
<h2 id="原生方法"><a class="header" href="#原生方法">原生方法</a></h2>
<blockquote>
<p>如下为GPT生成的一个模板</p>
</blockquote>
<p>示例：</p>
<hr />
<style>
    #box {
        width: 200px;
        height: 200px;
        border: 2px dashed #ccc;
        position: relative;
        display: inline-block;
        cursor: pointer;
    }

    #box div {
        display: block;
        width: 100%;
        height: 100%;
        text-align: center;
        line-height: 200px;
        font-size: 18px;
        color: #888;
        position: absolute;
        top: 0;
        left: 0;
    }

    #box img {
        display: none;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    #fileUpload {
        display: none;
    }
</style>
<script>
    let selectedFile;

    function handleFileSelect(event) {
        const files = event.target.files;
        if (files && files.length > 0) {
            selectedFile = files[0];
            const imageUrl = URL.createObjectURL(selectedFile);
            document.getElementById('preview').src = imageUrl;
            document.getElementById('preview').style.display = 'block';
            document.getElementById('placeholder').style.display = 'none';
        }
    }

    function replaceImage() {
        document.getElementById('fileUpload').click();
    }

    function uploadImage() {
        if (selectedFile) {
            console.log(selectedFile);
        } else {
            alert('请选择图片');
        }
    }
</script>
<div id="box" onclick="replaceImage()">
    <div id="placeholder">点击选择图片</div>
    <img id="preview" alt="" src="">
    <input type="file" id="fileUpload" onchange="handleFileSelect(event)">
</div>
<button onclick="uploadImage()">上传图片</button>
<hr />
<pre><code class="language-html">
&lt;div id=&quot;box&quot; onclick=&quot;replaceImage()&quot;&gt;
    &lt;div id=&quot;placeholder&quot;&gt;点击选择图片&lt;/div&gt;
    &lt;img id=&quot;preview&quot; alt=&quot;&quot; src=&quot;&quot;&gt;
    &lt;input type=&quot;file&quot; id=&quot;fileUpload&quot; onchange=&quot;handleFileSelect(event)&quot;&gt;
&lt;/div&gt;
&lt;button onclick=&quot;uploadImage()&quot;&gt;上传图片&lt;/button&gt;
</code></pre>
<pre><code class="language-css">#box {
    width: 200px;
    height: 200px;
    border: 2px dashed #ccc;
    position: relative;
    display: inline-block;
    cursor: pointer;
}

#box div {
    display: block;
    width: 100%;
    height: 100%;
    text-align: center;
    line-height: 200px;
    font-size: 18px;
    color: #888;
    position: absolute;
    top: 0;
    left: 0;
}

#box img {
    display: none;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

#fileUpload {
    display: none;
}
</code></pre>
<pre><code class="language-js">let selectedFile;

function handleFileSelect() {
    const files = event.target.files;
    if (files &amp;&amp; files.length &gt; 0) {
        selectedFile = files[0];
        const imageUrl = URL.createObjectURL(selectedFile);
        document.getElementById('preview').src = imageUrl;
        document.getElementById('preview').style.display = 'block';
        document.getElementById('placeholder').style.display = 'none';
    }
}

function replaceImage() {
    document.getElementById('fileUpload').click();
}

function uploadImage() {
    if (selectedFile) {
        // 执行图片上传操作
        // 可以通过selectedFile访问文件信息
        console.log(selectedFile);
    } else {
        alert('请选择图片');
    }
}
</code></pre>
<blockquote>
<p>对以上方法封装一下，特意用原生js写，代码长点，但不依赖jQuery</p>
</blockquote>
<pre><code class="language-js">class UploadBox {
    nodes;
    files;

    /**
     * 自定义简单封装图片上传
     * 待补充：可设置图片数目、单个文件大小
     * @param {string}selector 节点选择器
     * @param {?function}[callback] 文件输入框change()回调
     * */
    constructor(selector, callback) {
        this.nodes = document.querySelectorAll(selector);
        this.files = new Array(this.nodes.length);
        let _this = this;
        this.nodes.forEach((item, index) =&gt; {
            let fileInput = document.createElement(&quot;input&quot;);
            fileInput.setAttribute(&quot;type&quot;, &quot;file&quot;);
            fileInput.style.display = &quot;none&quot;;
            let img = document.createElement(&quot;img&quot;);
            img.setAttribute(&quot;alt&quot;, &quot;img&quot;);
            img.style.display = &quot;none&quot;;
            item.appendChild(fileInput);
            item.appendChild(img);

            item.addEventListener(&quot;click&quot;, function () {
                fileInput.click();
            });
            fileInput.addEventListener(&quot;change&quot;, function (e) {
                let files = this.files;
                if (files &amp;&amp; files.length &gt; 0) {
                    _this.files[index] = files[0];
                    img.src = URL.createObjectURL(files[0]);
                    img.style.display = 'block';
                    item.firstElementChild.style.display = 'none';
                }
                if (callback &amp;&amp; typeof callback === 'function') {
                    callback(_this.files, index, fileInput, _this);
                }
            })
        })
    }

    // 遍历清空
    clear() {

    }
}
</code></pre>
<p>调用时：</p>
<pre><code class="language-html">&lt;div class=&quot;upload&quot;&gt;
    &lt;p&gt;请选择图片1&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;upload&quot;&gt;
    &lt;p&gt;请选择图片2&lt;/p&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="language-js">let upload = new UploadBox(&quot;.upload&quot;, function (files) {
    console.log(files);
});
</code></pre>
<p>示例：（样式就懒得调了）</p>
<hr />
<style>
.upload{
    border: 1px solid;
}
</style>
<div class="upload">
    <p>请选择图片1</p>
</div>
<div class="upload">
    <p>请选择图片2</p>
</div>
<script>
class UploadBox {
    nodes;
    files;

    constructor(selector, callback) {
        this.nodes = document.querySelectorAll(selector);
        this.files = new Array(this.nodes.length);
        let _this = this;
        this.nodes.forEach((item, index) => {
            let fileInput = document.createElement("input");
            fileInput.setAttribute("type", "file");
            fileInput.style.display = "none";
            let img = document.createElement("img");
            img.setAttribute("alt", "img");
            img.style.display = "none";
            item.appendChild(fileInput);
            item.appendChild(img);

            item.addEventListener("click", function () {
                fileInput.click();
            });
            fileInput.addEventListener("change", function (e) {
                let files = this.files;
                if (files && files.length > 0) {
                    _this.files[index] = files[0];
                    img.src = URL.createObjectURL(files[0]);
                    img.style.display = 'block';
                    item.firstElementChild.style.display = 'none';
                }
                if (callback && typeof callback === 'function') {
                    callback(_this.files, index, fileInput, _this);
                }
            })
        })
    }


    clear() {

    }
}

let upload = new UploadBox(".upload", function (files) {
    console.log(files);
});
</script>
<h2 id="跨域上传"><a class="header" href="#跨域上传">跨域上传</a></h2>
<blockquote>
<p>jquery.ajax()跨域上传图片，需要设置<code>processData</code>、<code>contentType</code>为false，让jQuery不进行拦截，且后端配置，允许通过接口</p>
</blockquote>
<pre><code class="language-js">let formData = new FormData();
formData.append(&quot;fpfile&quot;, file);
formData.append(&quot;Authorization&quot;, token);//接口需要的其它参数     
$.ajax({
    url: &quot;https://test.com&quot;,
    type: &quot;POST&quot;,
    data: formData,
    processData: false,
    contentType: false,
    success(res){
        console.log(res);
    },
    error(res){
        console.log(res);
    }
})
</code></pre>
<ul>
<li>组件库</li>
<li>文件流</li>
<li>接口</li>
<li>等</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="图片生成字体"><a class="header" href="#图片生成字体">图片生成字体</a></h1>
<ul>
<li><a href="http://t.csdn.cn/RXRIa">使用FontCreator打造属于自己的字体</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/484402491">通过Unicode输入字符</a></li>
</ul>
<h2 id="1-fontcreator"><a class="header" href="#1-fontcreator">1. FontCreator</a></h2>
<ul>
<li>下载安装FontCreator，打开已安装的字体包。（要是有能力新建一个就不需要看这个了）。系统字体包默认位置：<code>C:\Windows\Fonts</code></li>
<li>如果是替换已有文字，比如<code>汤</code>，找到它的unicode为<code>\u6C64</code>，在该软件写法为<code>$6C64</code>，搜索【<code>Ctrl</code> + <code>F</code>】、右键编辑、全选【<code>Ctrl</code> + <code>A</code>】、删除【<code>Delete</code>】，叉掉再右键导入图像。</li>
<li>如果是新建一个字，随便找个不常用字（比如生僻字<code>$9FDF</code>鿟）进行上一步操作，右键导入图片。</li>
<li>注意：设置不常见字符code后，若没有安装该字体包，可能显示乱码<code>ꪪ</code>。</li>
<li>另存为，自己取个名字以作区分。安装到电脑，我先不装，用html演示。</li>
<li>在html中引入字体包，输入<code>汤</code>字，效果如下：</li>
<li><code>&lt;p&gt;中文文本汤随便输入一些文字&lt;/p&gt;</code></li>
<li><img src="img/890_text.jpg" alt="890-text.jpg" /></li>
<li>显然位置有偏差，就在字体中找到该字，右键编辑，全选，拖移调整。</li>
</ul>
<h2 id="2-输入法打出"><a class="header" href="#2-输入法打出">2. 输入法打出</a></h2>
<ul>
<li>微软拼音可以通过unicode直接设置，看<a href="https://zhuanlan.zhihu.com/p/484402491">通过Unicode输入字符</a></li>
<li>搜狗输入法，更多设置、属性设置、高级、自定义短语、添加新短语，比如我这里缩写设为<code>t</code></li>
<li>把上面的unicode拿过来，把<code>$</code>换成<code>\u</code>，在浏览器中随便打开个页面按F12，选择控制台（console），用英文引号括起来，比如<code>&quot;\u9FDF&quot;</code>，别用中文引号<code>“\u9FDF”</code>，下一行就会出现<code>ꪪ</code>或<code>鿟</code>，不要下面的单引号，把乱码复制到输入法的自定义短语里</li>
<li>或者不用引号也行，能复制就可以。我是前端，习惯用浏览器，要是有别的工具能实现也一样。</li>
<li><img src="img/890_code.jpg" alt="890_code.jpg" /></li>
<li>注意，显示都是<code>ꪪ</code>，但它们不一定是同一个字符</li>
<li>下次用搜狗输入法，打<code>t</code>它就出现了</li>
<li>其他未安装该字体包的设备，比如其他电脑手机打印机，显示出来的还是<code>ꪪ</code>或<code>鿟</code>。</li>
</ul>
<h2 id="3-常用字符unicode范围16进制"><a class="header" href="#3-常用字符unicode范围16进制">3. 常用字符unicode范围（16进制）</a></h2>
<ul>
<li>基本拉丁文字符（Basic Latin）：U+0000至U+007F</li>
<li>拉丁文-1补充字符（Latin-1 Supplement）：U+0080至U+00FF</li>
<li>拉丁文扩展-A字符（Latin Extended-A）：U+0100至U+017F</li>
<li>拉丁文扩展-B字符（Latin Extended-B）：U+0180至U+024F</li>
<li>摩斯科尼字符（Miscellaneous）：U+0250至U+02AF</li>
<li>拉丁文扩展增补字符（Latin Extended Additional）：U+1E00至U+1EFF</li>
<li>一般标点符号（General Punctuation）：U+2000至U+206F</li>
<li>上标及下标字符（Superscripts and Subscripts）：U+2070至U+209F</li>
<li>货币符号（Currency Symbols）：U+20A0至U+20CF</li>
<li>字母变音符号（Combining Diacritical Marks）：U+0300至U+036F</li>
<li>数学运算符号（Mathematical Operators）：U+2200至U+22FF</li>
<li>中日韩统一表意文字（CJK Unified Ideographs）：U+4E00至U+9FFF</li>
<li>中日韩统一表意文字扩展A（CJK Unified Ideographs Extension A）：U+3400至U+4DBF</li>
<li>中日韩统一表意文字扩展B（CJK Unified Ideographs Extension B）：U+20000至U+2A6DF</li>
<li>中日韩统一表意文字扩展C（CJK Unified Ideographs Extension C）：U+2A700至U+2B73F</li>
<li>中日韩统一表意文字扩展D（CJK Unified Ideographs Extension D）：U+2B740至U+2B81F</li>
<li>中日韩统一表意文字扩展E（CJK Unified Ideographs Extension E）：U+2B820至U+2CEAF</li>
<li>中日韩统一表意文字扩展F（CJK Unified Ideographs Extension F）：U+2CEB0至U+2EBEF</li>
<li>中日韩统一表意文字扩展G（CJK Unified Ideographs Extension G）：U+30000至U+3134F</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="随笔"><a class="header" href="#随笔">随笔</a></h1>
<h3 id="1-promise"><a class="header" href="#1-promise">1. promise</a></h3>
<blockquote>
<p>在<code>promise.then()</code>中若代码有异常，不会报错，而报错在<code>catch()</code>中</p>
</blockquote>
<pre><code class="language-js">function fn(n) {
    return new Promise((resolve, reject) =&gt; {
        if (n === 1) {
            resolve(1);
        } else {
            reject(2);
        }
    })
}

fn(1).then(res =&gt; {
    console.log(&quot;成功&quot;);
    // &quot;test&quot; is not definde，从这里断开进入失败回调
    console.log(test);
}).catch(err =&gt; {
    console.log(&quot;失败&quot;);
    console.log(err);
});
</code></pre>
<script>

function fn(n) {
    return new Promise((resolve, reject) => {
        if (n === 1) {
            resolve(1);
        } else {
            reject(2);
        }
    })
}
console.group("promise");
fn(1).then(res => {
    console.log("成功");
    console.log(test);
}).catch(err => {
    console.log("失败");
    console.log(err);
});
console.groupEnd();

</script>
<h3 id="2-局部刷新"><a class="header" href="#2-局部刷新">2. 局部刷新</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="兼容性处理"><a class="header" href="#兼容性处理">兼容性处理</a></h1>
<h2 id="苹果浏览器时间格式"><a class="header" href="#苹果浏览器时间格式">苹果浏览器时间格式</a></h2>
<blockquote>
<p>js时间格式无法识别<code>2023-08-11 11:19:44</code>，只能写<code>new Date(&quot;2023/08/11 11:20:01&quot;)</code>，要么每次new前正则替换下。</p>
<p>或者重构<code>Date</code></p>
</blockquote>
<pre><code class="language-js">function wrapDate (){
    let _date = Date;
    Date = function () {
        if (arguments.length &gt; 0 &amp;&amp; typeof (arguments[0]) === 'string' &amp;&amp; arguments[0].includes('-')) {
            arguments[0] = arguments[0].replace(/-/g, '/');
        }
        return new _date(...arguments);
    }
    Date.prototype = _date.prototype
    // 继承静态函数，过滤已有的静态函数和参数，取数组差集
    const _dateStaticParam = Object.getOwnPropertyNames(_date)
    const dateStaticParam = Object.getOwnPropertyNames(Date)
    const diffParam = []
    for (let i = 0; i &lt; _dateStaticParam.length; i++) {
        let find = false
        for (let j = 0; j &lt; dateStaticParam.length; j++) {
            if (_dateStaticParam[i] === dateStaticParam[j]) {
                find = true
                break
            }
        }
        if (!find) {
            diffParam.push(_dateStaticParam[i])
        }
    }
    for (let i = 0; i &lt; diffParam.length; i++) {
        Date[diffParam[i]] = _date[diffParam[i]]
    }
}

if (navigator.userAgent.includes('iPhone') || navigator.userAgent.includes('iPad')) {
    wrapDate()
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="diy插件"><a class="header" href="#diy插件">DIY插件</a></h1>
<h2 id="1-模态窗"><a class="header" href="#1-模态窗">1. 模态窗</a></h2>
<h3 id="封装"><a class="header" href="#封装">封装</a></h3>
<p>通用css样式</p>
<pre><code class="language-css">._modal{display:none;width:100%;height:100%;background-color:rgba(0,0,0,0.8);position:fixed;top:0;left:0;z-index:9999;line-height:0;}._modal&gt;.content{height:5rem;width:5rem;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);}._modal&gt;.content&gt;.close{position:absolute;top:-1em;right:0;line-height:1em;}._modal&gt;.content&gt;.detail{line-height:1em;height:100%;width:100%;}
</code></pre>
<p>通用less写法</p>
<pre><code class="language-less">._modal{display:none;width: 100%;height: 100%;background-color: rgba(0, 0, 0, 0.8);position: fixed;top: 0;left: 0;z-index: 9999;line-height: 0; .content{height: 5rem;width: 5rem;position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);} .close{position: absolute;top: -1em;right: 0;line-height: 1em;} .detail{line-height:1em;height: 100%;width: 100%;} }
</code></pre>
<p>封装js</p>
<pre><code class="language-js">class Modal {
    box;
    el;

    constructor({el, width = &quot;5rem&quot;, height = &quot;5rem&quot;, callback}) {
        let box = $(el);
        box.addClass(&quot;_modal&quot;);
        box.html(`&lt;div class=&quot;content&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; title=&quot;关闭&quot; class=&quot;close&quot;&gt;关闭&lt;/a&gt;&lt;div class=&quot;detail&quot;&gt;&lt;/div&gt;&lt;/div&gt;`);
        $(el + &quot; .close&quot;).click(() =&gt; {
            box.hide();
        })
        this.box = box;
        this.el = el;
        let content = $(el + &quot;&gt;.content&quot;);
        content.css(&quot;width&quot;, this.getPx(width));
        content.css(&quot;height&quot;, this.getPx(height));
        // 再多的样式就在css里写吧
        if (typeof callback === &quot;function&quot;) callback(this);
        return this;
    }

    html(dom) {
        $(this.el + &quot;&gt;.content&gt;.detail&quot;).html(dom);
        return this;
    }

    show() {
        this.box.show();
        return this;
    }

    hide() {
        this.box.hide();
        return this;
    }

    getPx(val) {
        if (!val) val = &quot;0px&quot;
        if (typeof val === &quot;number&quot;) val += &quot;px&quot;;
        if (typeof val === &quot;string&quot;) {
            if (!isNaN(Number(val))) val += &quot;px&quot;;
        }
        return val;
    }
}
</code></pre>
<h3 id="使用-2"><a class="header" href="#使用-2">使用</a></h3>
<p>html</p>
<pre><code class="language-html">&lt;div id=&quot;modal&quot;&gt;&lt;/div&gt;
</code></pre>
<p>js</p>
<pre><code class="language-js">let modal = new Modal({
    el: &quot;#modal&quot;,
    width: &quot;6rem&quot;,
    height: &quot;7rem&quot;,
    callback(that) {
        console.log(that);
    }
})

modal.html(1234).show();
</code></pre>
<p>css</p>
<pre><code class="language-css">._modal&gt;.content{
    border: 1px solid red;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p>该文介绍了mdbook的基本使用，常见问题以及自定义修改。</p>
</blockquote>
<h2 id="参考内容"><a class="header" href="#参考内容">参考内容</a></h2>
<p><a href="https://rust-lang.github.io/mdBook">官网</a></p>
<p><a href="https://mdbook-guide.niqin.com/zh-cn/index.html">中文文档</a></p>
<p><a href="https://github.com/rust-lang/mdBook/">github地址</a></p>
<p><a href="http://lihuaxi.xjx100.cn/news/1247329.html">参考文章</a></p>
<blockquote>
<p>中文文档有缺失，以原文档为准。</p>
<p>感觉不好用，想用gitbook，但是node报错。</p>
</blockquote>
<h2 id="安装-2"><a class="header" href="#安装-2">安装</a></h2>
<ul>
<li><a href="https://github.com/rust-lang/mdBook/releases">github下载地址</a></li>
<li>网络不好可以下载别人分享的exe：<a href="https://pan.baidu.com/s/1nd1343_nmaZBu_ogcWaN1Q?pwd=isjq">百度网盘文件</a></li>
<li>方便点可以配置环境变量path</li>
<li>dos正常运行但idea运行报错：path添加<code>C:\Windows\System32;</code>，</li>
<li>或者：tools工具-&gt;terminal终端-&gt;shell path(shell路径)-&gt;<code>C:\Windows\system32\cmd.exe</code>-&gt;restart</li>
<li>初始化
<pre><code class="language-shell">  mdboot init
</code></pre>
</li>
<li>启动服务
<pre><code class="language-shell"># 默认浏览器打开网址
start http://localhost:3000
# 启动服务 默认 localhost:3000
mdbook serve 
</code></pre>
<pre><code class="language-shell">mdbook serve -n 192.168.0.111 -p 3000 -o
</code></pre>
</li>
</ul>
<h2 id="配置文件"><a class="header" href="#配置文件">配置文件</a></h2>
<pre><code class="language-toml">[book]
authors = [&quot;tzj&quot;]
language = &quot;zh-cn&quot;
multilingual = false
description = &quot;2023-07-28 11:09:13 tzj&quot;
src = &quot;src&quot; # 资源目录：默认src
title = &quot;标题&quot;

[Build]
# build-dir = &quot;book/&quot; # 渲染地址
create-missing = true # 目录文件不存在时是否生成文件 mo默认 true

[output.html.playground]
editable = true
# 全局设置代码可编辑，若单个代码段，加上`,editable`，如：```js,editable    ```

[output.html]
# 以src为根目录，引入以下内容 （报错，尚未解决）
# additional-css = [&quot;css/custom.css&quot;]
#additional-js = [&quot;js\\custom.js&quot;]

</code></pre>
<h2 id="自定义修改"><a class="header" href="#自定义修改">自定义修改</a></h2>
<h3 id="修改模板"><a class="header" href="#修改模板">修改模板</a></h3>
<blockquote>
<p>mdbook提供了修改模板的方法：在根目录下创建目录<code>theme</code>，选择性写入文件，有则自动覆盖。</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>以下是您可以覆盖的文件:</th><th>描述</th></tr></thead><tbody>
<tr><td><strong>index.hbs</strong></td><td>hbs 模板.</td></tr>
<tr><td>*<strong>head.hbs*</strong></td><td>HTML <code>head</code> 部分.</td></tr>
<tr><td>*<strong>header.hbs*</strong></td><td>每个页面的头部</td></tr>
<tr><td>- *<strong>css/*</strong></td><td>样式文件</td></tr>
<tr><td>- *<strong>css/chrome.css*</strong></td><td>UI 元素</td></tr>
<tr><td>- *<strong>css/general.css*</strong></td><td>基础样式</td></tr>
<tr><td>- *<strong>css/print.css*</strong></td><td>打印输出的样式</td></tr>
<tr><td>- *<strong>css/variables.css*</strong></td><td>css 变量</td></tr>
<tr><td><strong>book.js</strong></td><td>主要用于添加客户端功能,如隐藏/取消隐藏侧边栏,更改主题,…</td></tr>
<tr><td><strong>highlight.js</strong></td><td>是用于突出显示代码片段的 JavaScript,您不需要修改它.</td></tr>
<tr><td><strong>highlight.css</strong></td><td>是用于代码突出显示的主题</td></tr>
<tr><td><strong>favicon.svg</strong></td><td>将使用的 favicon</td></tr>
</tbody></table>
</div>
<h3 id="修改源码"><a class="header" href="#修改源码">修改源码</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/mdBook">下载源码</a></li>
<li>找到文件：<code>mdBook-0.4.32\src\theme\searcher\searcher2.js</code>的<code>globalKeyHandler()</code>方法</li>
<li>源码忽略了ctrl、shift，加上了不知有没有冲突，故而把原来的监听S注释掉，首行改为：
<pre><code class="language-js">if (e.altKey || e.metaKey || e.shiftKey || e.target.type === 'textarea' || e.target.type === 'text') return;

if (!hasFocus() &amp;&amp; e.ctrlKey &amp;&amp; e.keyCode === 70) {
  e.preventDefault();
  showSearch(true);
  window.scrollTo(0, 0);
  searchbar.select();
}
if (e.ctrlKey) return;
</code></pre>
</li>
<li>可以再自行完善下，让焦点在搜索框时，ctrl+f 触发关闭方法，不然会弹出浏览器自带搜索</li>
<li>根目录创建目录<code>theme/js</code>,复制上述文件<code>searcher2.js</code>到<code>theme/js/searcher2.js</code></li>
<li>配置该文件：
<pre><code class="language-toml">[output.html]
additional-js = [&quot;theme/js/searcher2.js&quot;]
</code></pre>
</li>
<li>从github下载源码的<code>index.hbs</code>到<code>theme</code>里</li>
<li>修改<code>index.hbs</code>：删/注掉该行：<code>&lt;script src=&quot;{{ path_to_root }}searcher2.js&quot;&gt;&lt;/script&gt;</code></li>
<li>把title、placeholder等，从英文改为中文，将提示中的<code>S</code>改为<code>Ctrl + F</code></li>
</ul>
<h3 id="中文"><a class="header" href="#中文">中文</a></h3>
<ul>
<li>将上述<code>index.hbs</code>中的切换侧边栏、切换主题、搜索、打印等英文描述title改成中文</li>
<li>同理把<code>book.js</code>复制到<code>theme</code>下，搜索：<code>Copied</code>、<code>Copy to clipboard</code>替换为中文</li>
</ul>
<h3 id="设置a标签"><a class="header" href="#设置a标签">设置a标签</a></h3>
<blockquote>
<p>如果全部a标签设置<code>href=&quot;_blank&quot;</code>，直接在<code>index.hbs</code>或外链js并配置<code>additional-js</code>。写入一下逻辑：</p>
</blockquote>
<pre><code class="language-js">  let content = document.querySelector(&quot;div#content&quot;); // 获取div#content元素
  let links = content.getElementsByTagName(&quot;a&quot;); // 获取div#content下的所有a标签

  for (let i = 0; i &lt; links.length; i++) {
      links[i].setAttribute(&quot;target&quot;, target); // 设置target属性为&quot;_blank&quot;
  }
</code></pre>
<blockquote>
<p>只改变markdown生成的a标签，如该格式：<code>[标题](http://127.0.0.1)</code>，而手写的a标签，则不修改，如<code>&lt;a href=&quot;http://127.0.0.1&quot;&gt;标题&lt;/a&gt;</code></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="blog"><a class="header" href="#blog">blog</a></h1>
<blockquote>
<p>一直以来想弄个blog存些笔记，最近看到了gitbook、mdbook，也没整明白</p>
<p>看网上说一般用hexo，我也试试。国内肯定优先gitee吧，有空再同步到github上</p>
<p>hexo基于node，索性加上vue+vite+element。。。好像有点多，走一步看一步吧。</p>
</blockquote>
<h2 id="参考文档"><a class="header" href="#参考文档">参考文档</a></h2>
<ul>
<li><a href="https://hexo.io/zh-cn/">Hexo官方文档zh-cn</a></li>
<li><a href="http://t.csdn.cn/D9Vam">github pages 用法详解</a></li>
</ul>
<h2 id="gitee-pages"><a class="header" href="#gitee-pages">Gitee pages</a></h2>
<blockquote>
<p>设置gitee pages进去才发现，上次就卡在实名认证照片不清晰。。。</p>
</blockquote>
<ul>
<li><a href="https://gitee.com/">gitee官网</a>注册账号、创建仓库、选择<code>服务</code>-&gt;<code>Gitee Pages</code>即可。</li>
</ul>
<h2 id="github-page"><a class="header" href="#github-page">github page</a></h2>
<blockquote>
<p>算了，先用github page吧</p>
</blockquote>
<ul>
<li><a href="https://github.com">github官网</a>注册、仓库、代码等基础操作就不赘述了。</li>
<li>选择：settings -&gt; pages -&gt; 忘了，以前配置过</li>
<li>[我的blog](https://bcm tang.github.io/blog/)</li>
</ul>
<h2 id="hexo-安装"><a class="header" href="#hexo-安装">Hexo 安装</a></h2>
<ol>
<li>npm下载
<pre><code class="language-shell">cnpm install -g hexo-cli
</code></pre>
</li>
<li>初始化
<pre><code class="language-shell">hexo init blog #blog为自定义项目名
</code></pre>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="文档记录"><a class="header" href="#文档记录">文档记录</a></h1>
<blockquote>
<p>记录有用的网址，包括不限于计算机编程</p>
</blockquote>
<h2 id="前端项目文档"><a class="header" href="#前端项目文档">前端项目文档</a></h2>
<ul>
<li><a href="https://note.youdao.com/ynoteshare/index.html?id=d383c5d5ed85658aed7ef6510dd385ea&amp;type=notebook&amp;_time=1691654272140#/WEBf0f29663261514542318ea911df2f94e">常见问题</a></li>
</ul>
<h2 id="官网"><a class="header" href="#官网">官网</a></h2>
<h3 id="前端"><a class="header" href="#前端">前端</a></h3>
<h4 id="组件库"><a class="header" href="#组件库">组件库</a></h4>
<h4 id="ui库"><a class="header" href="#ui库">UI库</a></h4>
<h3 id="ui设计"><a class="header" href="#ui设计">UI设计</a></h3>
<h3 id="github"><a class="header" href="#github">GitHub</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="浏览器尺寸"><a class="header" href="#浏览器尺寸">浏览器尺寸</a></h1>
<blockquote>
<p>屏幕大小、浏览器类型、设置都有影响。</p>
</blockquote>
<pre><code class="language-js">document.documentElement.clientHeight
</code></pre>
<blockquote>
<p>屏幕大小：1920*1080、默认非全屏<code>F11</code>、100%比例。不同浏览器可视高度（px）：</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th></th><th>显示书签</th><th>隐藏书签</th></tr></thead><tbody>
<tr><td>谷歌Chrome</td><td>923</td><td>955</td></tr>
<tr><td>火狐Firefox</td><td>919</td><td>947</td></tr>
<tr><td>微软Edge</td><td>929</td><td>961</td></tr>
</tbody></table>
</div>
<blockquote>
<p>另外，如果有顶条的话，默认55px</p>
</blockquote>
<p><img src="img/img.png" alt="topBar" /></p>
<div style="break-before: page; page-break-before: always;"></div><blockquote>
<p>该文介绍了mdbook的基本使用，常见问题以及自定义修改。</p>
</blockquote>
<h2 id="参考内容-1"><a class="header" href="#参考内容-1">参考内容</a></h2>
<p><a href="https://rust-lang.github.io/mdBook">官网</a></p>
<p><a href="https://mdbook-guide.niqin.com/zh-cn/index.html">中文文档</a></p>
<p><a href="https://github.com/rust-lang/mdBook/">github地址</a></p>
<p><a href="http://lihuaxi.xjx100.cn/news/1247329.html">参考文章</a></p>
<blockquote>
<p>中文文档有缺失，以原文档为准。</p>
<p>感觉不好用，想用gitbook，但是node报错。</p>
</blockquote>
<h2 id="安装-3"><a class="header" href="#安装-3">安装</a></h2>
<ul>
<li><a href="https://github.com/rust-lang/mdBook/releases">github下载地址</a></li>
<li>网络不好可以下载别人分享的exe：<a href="https://pan.baidu.com/s/1nd1343_nmaZBu_ogcWaN1Q?pwd=isjq">百度网盘文件</a></li>
<li>方便点可以配置环境变量path</li>
<li>dos正常运行但idea运行报错：path添加<code>C:\Windows\System32;</code>，</li>
<li>或者：tools工具-&gt;terminal终端-&gt;shell path(shell路径)-&gt;<code>C:\Windows\system32\cmd.exe</code>-&gt;restart</li>
<li>初始化
<pre><code class="language-shell">  mdboot init
</code></pre>
</li>
<li>启动服务
<pre><code class="language-shell"># 默认浏览器打开网址
start http://localhost:3000
# 启动服务 默认 localhost:3000
mdbook serve 
</code></pre>
<pre><code class="language-shell">mdbook serve -n 192.168.0.111 -p 3000 -o
</code></pre>
</li>
</ul>
<h2 id="配置文件-1"><a class="header" href="#配置文件-1">配置文件</a></h2>
<pre><code class="language-toml">[book]
authors = [&quot;tzj&quot;]
language = &quot;zh-cn&quot;
multilingual = false
description = &quot;2023-07-28 11:09:13 tzj&quot;
src = &quot;src&quot; # 资源目录：默认src
title = &quot;标题&quot;

[Build]
# build-dir = &quot;book/&quot; # 渲染地址
create-missing = true # 目录文件不存在时是否生成文件 mo默认 true

[output.html.playground]
editable = true
# 全局设置代码可编辑，若单个代码段，加上`,editable`，如：```js,editable    ```

[output.html]
# 以src为根目录，引入以下内容 （报错，尚未解决）
# additional-css = [&quot;css/custom.css&quot;]
#additional-js = [&quot;js\\custom.js&quot;]

</code></pre>
<h2 id="自定义修改-1"><a class="header" href="#自定义修改-1">自定义修改</a></h2>
<h3 id="修改模板-1"><a class="header" href="#修改模板-1">修改模板</a></h3>
<blockquote>
<p>mdbook提供了修改模板的方法：在根目录下创建目录<code>theme</code>，选择性写入文件，有则自动覆盖。</p>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>以下是您可以覆盖的文件:</th><th>描述</th></tr></thead><tbody>
<tr><td><strong>index.hbs</strong></td><td>hbs 模板.</td></tr>
<tr><td>*<strong>head.hbs*</strong></td><td>HTML <code>head</code> 部分.</td></tr>
<tr><td>*<strong>header.hbs*</strong></td><td>每个页面的头部</td></tr>
<tr><td>- *<strong>css/*</strong></td><td>样式文件</td></tr>
<tr><td>- *<strong>css/chrome.css*</strong></td><td>UI 元素</td></tr>
<tr><td>- *<strong>css/general.css*</strong></td><td>基础样式</td></tr>
<tr><td>- *<strong>css/print.css*</strong></td><td>打印输出的样式</td></tr>
<tr><td>- *<strong>css/variables.css*</strong></td><td>css 变量</td></tr>
<tr><td><strong>book.js</strong></td><td>主要用于添加客户端功能,如隐藏/取消隐藏侧边栏,更改主题,…</td></tr>
<tr><td><strong>highlight.js</strong></td><td>是用于突出显示代码片段的 JavaScript,您不需要修改它.</td></tr>
<tr><td><strong>highlight.css</strong></td><td>是用于代码突出显示的主题</td></tr>
<tr><td><strong>favicon.svg</strong></td><td>将使用的 favicon</td></tr>
</tbody></table>
</div>
<h3 id="修改源码-1"><a class="header" href="#修改源码-1">修改源码</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/mdBook">下载源码</a></li>
<li>找到文件：<code>mdBook-0.4.32\src\theme\searcher\searcher2.js</code>的<code>globalKeyHandler()</code>方法</li>
<li>源码忽略了ctrl、shift，加上了不知有没有冲突，故而把原来的监听S注释掉，首行改为：
<pre><code class="language-js">if (e.altKey || e.metaKey || e.shiftKey || e.target.type === 'textarea' || e.target.type === 'text') return;

if (!hasFocus() &amp;&amp; e.ctrlKey &amp;&amp; e.keyCode === 70) {
  e.preventDefault();
  showSearch(true);
  window.scrollTo(0, 0);
  searchbar.select();
}
if (e.ctrlKey) return;
</code></pre>
</li>
<li>可以再自行完善下，让焦点在搜索框时，ctrl+f 触发关闭方法，不然会弹出浏览器自带搜索</li>
<li>根目录创建目录<code>theme/js</code>,复制上述文件<code>searcher2.js</code>到<code>theme/js/searcher2.js</code></li>
<li>配置该文件：
<pre><code class="language-toml">[output.html]
additional-js = [&quot;theme/js/searcher2.js&quot;]
</code></pre>
</li>
<li>从github下载源码的<code>index.hbs</code>到<code>theme</code>里</li>
<li>修改<code>index.hbs</code>：删/注掉该行：<code>&lt;script src=&quot;{{ path_to_root }}searcher2.js&quot;&gt;&lt;/script&gt;</code></li>
<li>把title、placeholder等，从英文改为中文，将提示中的<code>S</code>改为<code>Ctrl + F</code></li>
</ul>
<h3 id="中文-1"><a class="header" href="#中文-1">中文</a></h3>
<ul>
<li>将上述<code>index.hbs</code>中的切换侧边栏、切换主题、搜索、打印等英文描述title改成中文</li>
<li>同理把<code>book.js</code>复制到<code>theme</code>下，搜索：<code>Copied</code>、<code>Copy to clipboard</code>替换为中文</li>
</ul>
<h3 id="设置a标签-1"><a class="header" href="#设置a标签-1">设置a标签</a></h3>
<blockquote>
<p>如果全部a标签设置<code>href=&quot;_blank&quot;</code>，直接在<code>index.hbs</code>或外链js并配置<code>additional-js</code>。写入一下逻辑：</p>
</blockquote>
<pre><code class="language-js">  let content = document.querySelector(&quot;div#content&quot;); // 获取div#content元素
  let links = content.getElementsByTagName(&quot;a&quot;); // 获取div#content下的所有a标签

  for (let i = 0; i &lt; links.length; i++) {
      links[i].setAttribute(&quot;target&quot;, target); // 设置target属性为&quot;_blank&quot;
  }
</code></pre>
<blockquote>
<p>只改变markdown生成的a标签，如该格式：<code>[标题](http://127.0.0.1)</code>，而手写的a标签，则不修改，如<code>&lt;a href=&quot;http://127.0.0.1&quot;&gt;标题&lt;/a&gt;</code></p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <!---<script src="searcher2.js"></script>-->

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/js/searcher2.js"></script>
        <script src="theme/js/nav2.js"></script>
        <script src="theme/js/markdown.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
